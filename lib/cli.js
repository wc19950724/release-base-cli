#!/usr/bin/env node
"use strict";var t=require("node:fs"),e=require("node:path"),i=require("events"),s=require("child_process"),r=require("path"),n=require("fs"),o=require("process"),a=require("assert"),l=require("readline"),h=require("node:buffer"),c=require("node:child_process"),u=require("node:process"),p=require("node:url"),d=require("node:os"),m=require("buffer"),f=require("stream"),g=require("util"),b=require("node:util"),y=require("node:tty"),w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var E={exports:{}},O={},x={};let _=class extends Error{constructor(t,e,i){super(i),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=e,this.exitCode=t,this.nestedError=void 0}};x.CommanderError=_,x.InvalidArgumentError=class extends _{constructor(t){super(1,"commander.invalidArgument",t),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};const{InvalidArgumentError:C}=x;O.Argument=class{constructor(t,e){switch(this.description=e||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,t[0]){case"<":this.required=!0,this._name=t.slice(1,-1);break;case"[":this.required=!1,this._name=t.slice(1,-1);break;default:this.required=!0,this._name=t}this._name.length>3&&"..."===this._name.slice(-3)&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}argParser(t){return this.parseArg=t,this}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,e)=>{if(!this.argChoices.includes(t))throw new C(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,e):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}},O.humanReadableArgName=function(t){const e=t.name()+(!0===t.variadic?"...":"");return t.required?"<"+e+">":"["+e+"]"};var A={},S={};const{humanReadableArgName:I}=O;S.Help=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(t){const e=t.commands.filter((t=>!t._hidden));if(t._hasImplicitHelpCommand()){const[,i,s]=t._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),r=t.createCommand(i).helpOption(!1);r.description(t._helpCommandDescription),s&&r.arguments(s),e.push(r)}return this.sortSubcommands&&e.sort(((t,e)=>t.name().localeCompare(e.name()))),e}compareOptions(t,e){const i=t=>t.short?t.short.replace(/^-/,""):t.long.replace(/^--/,"");return i(t).localeCompare(i(e))}visibleOptions(t){const e=t.options.filter((t=>!t.hidden)),i=t._hasHelpOption&&t._helpShortFlag&&!t._findOption(t._helpShortFlag),s=t._hasHelpOption&&!t._findOption(t._helpLongFlag);if(i||s){let r;r=i?s?t.createOption(t._helpFlags,t._helpDescription):t.createOption(t._helpShortFlag,t._helpDescription):t.createOption(t._helpLongFlag,t._helpDescription),e.push(r)}return this.sortOptions&&e.sort(this.compareOptions),e}visibleGlobalOptions(t){if(!this.showGlobalOptions)return[];const e=[];for(let i=t.parent;i;i=i.parent){const t=i.options.filter((t=>!t.hidden));e.push(...t)}return this.sortOptions&&e.sort(this.compareOptions),e}visibleArguments(t){return t._argsDescription&&t._args.forEach((e=>{e.description=e.description||t._argsDescription[e.name()]||""})),t._args.find((t=>t.description))?t._args:[]}subcommandTerm(t){const e=t._args.map((t=>I(t))).join(" ");return t._name+(t._aliases[0]?"|"+t._aliases[0]:"")+(t.options.length?" [options]":"")+(e?" "+e:"")}optionTerm(t){return t.flags}argumentTerm(t){return t.name()}longestSubcommandTermLength(t,e){return e.visibleCommands(t).reduce(((t,i)=>Math.max(t,e.subcommandTerm(i).length)),0)}longestOptionTermLength(t,e){return e.visibleOptions(t).reduce(((t,i)=>Math.max(t,e.optionTerm(i).length)),0)}longestGlobalOptionTermLength(t,e){return e.visibleGlobalOptions(t).reduce(((t,i)=>Math.max(t,e.optionTerm(i).length)),0)}longestArgumentTermLength(t,e){return e.visibleArguments(t).reduce(((t,i)=>Math.max(t,e.argumentTerm(i).length)),0)}commandUsage(t){let e=t._name;t._aliases[0]&&(e=e+"|"+t._aliases[0]);let i="";for(let e=t.parent;e;e=e.parent)i=e.name()+" "+i;return i+e+" "+t.usage()}commandDescription(t){return t.description()}subcommandDescription(t){return t.summary()||t.description()}optionDescription(t){const e=[];if(t.argChoices&&e.push(`choices: ${t.argChoices.map((t=>JSON.stringify(t))).join(", ")}`),void 0!==t.defaultValue){(t.required||t.optional||t.isBoolean()&&"boolean"==typeof t.defaultValue)&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`)}return void 0!==t.presetArg&&t.optional&&e.push(`preset: ${JSON.stringify(t.presetArg)}`),void 0!==t.envVar&&e.push(`env: ${t.envVar}`),e.length>0?`${t.description} (${e.join(", ")})`:t.description}argumentDescription(t){const e=[];if(t.argChoices&&e.push(`choices: ${t.argChoices.map((t=>JSON.stringify(t))).join(", ")}`),void 0!==t.defaultValue&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),e.length>0){const i=`(${e.join(", ")})`;return t.description?`${t.description} ${i}`:i}return t.description}formatHelp(t,e){const i=e.padWidth(t,e),s=e.helpWidth||80;function r(t,r){if(r){const n=`${t.padEnd(i+2)}${r}`;return e.wrap(n,s-2,i+2)}return t}function n(t){return t.join("\n").replace(/^/gm," ".repeat(2))}let o=[`Usage: ${e.commandUsage(t)}`,""];const a=e.commandDescription(t);a.length>0&&(o=o.concat([e.wrap(a,s,0),""]));const l=e.visibleArguments(t).map((t=>r(e.argumentTerm(t),e.argumentDescription(t))));l.length>0&&(o=o.concat(["Arguments:",n(l),""]));const h=e.visibleOptions(t).map((t=>r(e.optionTerm(t),e.optionDescription(t))));if(h.length>0&&(o=o.concat(["Options:",n(h),""])),this.showGlobalOptions){const i=e.visibleGlobalOptions(t).map((t=>r(e.optionTerm(t),e.optionDescription(t))));i.length>0&&(o=o.concat(["Global Options:",n(i),""]))}const c=e.visibleCommands(t).map((t=>r(e.subcommandTerm(t),e.subcommandDescription(t))));return c.length>0&&(o=o.concat(["Commands:",n(c),""])),o.join("\n")}padWidth(t,e){return Math.max(e.longestOptionTermLength(t,e),e.longestGlobalOptionTermLength(t,e),e.longestSubcommandTermLength(t,e),e.longestArgumentTermLength(t,e))}wrap(t,e,i,s=40){const r=new RegExp("[\\n][ \\f\\t\\v   -   　\ufeff]+");if(t.match(r))return t;const n=e-i;if(n<s)return t;const o=t.slice(0,i),a=t.slice(i).replace("\r\n","\n"),l=" ".repeat(i),h="\\s​",c=new RegExp(`\n|.{1,${n-1}}([${h}]|$)|[^${h}]+?([${h}]|$)`,"g");return o+(a.match(c)||[]).map(((t,e)=>"\n"===t?"":(e>0?l:"")+t.trimEnd())).join("\n")}};var $={};const{InvalidArgumentError:T}=x;function R(t){let e,i;const s=t.split(/[ |,]+/);return s.length>1&&!/^[[<]/.test(s[1])&&(e=s.shift()),i=s.shift(),!e&&/^-[^-]$/.test(i)&&(e=i,i=void 0),{shortFlag:e,longFlag:i}}$.Option=class{constructor(t,e){this.flags=t,this.description=e||"",this.required=t.includes("<"),this.optional=t.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(t),this.mandatory=!1;const i=R(t);this.short=i.shortFlag,this.long=i.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}preset(t){return this.presetArg=t,this}conflicts(t){return this.conflictsWith=this.conflictsWith.concat(t),this}implies(t){let e=t;return"string"==typeof t&&(e={[t]:!0}),this.implied=Object.assign(this.implied||{},e),this}env(t){return this.envVar=t,this}argParser(t){return this.parseArg=t,this}makeOptionMandatory(t=!0){return this.mandatory=!!t,this}hideHelp(t=!0){return this.hidden=!!t,this}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,e)=>{if(!this.argChoices.includes(t))throw new T(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,e):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.name().replace(/^no-/,"").split("-").reduce(((t,e)=>t+e[0].toUpperCase()+e.slice(1)))}is(t){return this.short===t||this.long===t}isBoolean(){return!this.required&&!this.optional&&!this.negate}},$.splitOptionFlags=R,$.DualOptions=class{constructor(t){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,t.forEach((t=>{t.negate?this.negativeOptions.set(t.attributeName(),t):this.positiveOptions.set(t.attributeName(),t)})),this.negativeOptions.forEach(((t,e)=>{this.positiveOptions.has(e)&&this.dualOptions.add(e)}))}valueFromOption(t,e){const i=e.attributeName();if(!this.dualOptions.has(i))return!0;const s=this.negativeOptions.get(i).presetArg,r=void 0!==s&&s;return e.negate===(r===t)}};var k={};const P=3;k.suggestSimilar=function(t,e){if(!e||0===e.length)return"";e=Array.from(new Set(e));const i=t.startsWith("--");i&&(t=t.slice(2),e=e.map((t=>t.slice(2))));let s=[],r=P;return e.forEach((e=>{if(e.length<=1)return;const i=function(t,e){if(Math.abs(t.length-e.length)>P)return Math.max(t.length,e.length);const i=[];for(let e=0;e<=t.length;e++)i[e]=[e];for(let t=0;t<=e.length;t++)i[0][t]=t;for(let s=1;s<=e.length;s++)for(let r=1;r<=t.length;r++){let n=1;n=t[r-1]===e[s-1]?0:1,i[r][s]=Math.min(i[r-1][s]+1,i[r][s-1]+1,i[r-1][s-1]+n),r>1&&s>1&&t[r-1]===e[s-2]&&t[r-2]===e[s-1]&&(i[r][s]=Math.min(i[r][s],i[r-2][s-2]+1))}return i[t.length][e.length]}(t,e),n=Math.max(t.length,e.length);(n-i)/n>.4&&(i<r?(r=i,s=[e]):i===r&&s.push(e))})),s.sort(((t,e)=>t.localeCompare(e))),i&&(s=s.map((t=>`--${t}`))),s.length>1?`\n(Did you mean one of ${s.join(", ")}?)`:1===s.length?`\n(Did you mean ${s[0]}?)`:""};const N=i.EventEmitter,L=s,j=r,D=n,M=o,{Argument:G,humanReadableArgName:F}=O,{CommanderError:B}=x,{Help:H}=S,{Option:V,splitOptionFlags:U,DualOptions:q}=$,{suggestSimilar:W}=k;function z(t,e){t._hasHelpOption&&e.find((e=>e===t._helpLongFlag||e===t._helpShortFlag))&&(t.outputHelp(),t._exit(0,"commander.helpDisplayed","(outputHelp)"))}function X(t){return t.map((t=>{if(!t.startsWith("--inspect"))return t;let e,i,s="127.0.0.1",r="9229";return null!==(i=t.match(/^(--inspect(-brk)?)$/))?e=i[1]:null!==(i=t.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(e=i[1],/^\d+$/.test(i[3])?r=i[3]:s=i[3]):null!==(i=t.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(e=i[1],s=i[3],r=i[4]),e&&"0"!==r?`${e}=${s}:${parseInt(r)+1}`:t}))}function Y(t){const e=[];for(let i=t;i;i=i.parent)e.push(i);return e}A.Command=class t extends N{constructor(t){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this._args=[],this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=t||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:t=>M.stdout.write(t),writeErr:t=>M.stderr.write(t),getOutHelpWidth:()=>M.stdout.isTTY?M.stdout.columns:void 0,getErrHelpWidth:()=>M.stderr.isTTY?M.stderr.columns:void 0,outputError:(t,e)=>e(t)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(t){return this._outputConfiguration=t._outputConfiguration,this._hasHelpOption=t._hasHelpOption,this._helpFlags=t._helpFlags,this._helpDescription=t._helpDescription,this._helpShortFlag=t._helpShortFlag,this._helpLongFlag=t._helpLongFlag,this._helpCommandName=t._helpCommandName,this._helpCommandnameAndArgs=t._helpCommandnameAndArgs,this._helpCommandDescription=t._helpCommandDescription,this._helpConfiguration=t._helpConfiguration,this._exitCallback=t._exitCallback,this._storeOptionsAsProperties=t._storeOptionsAsProperties,this._combineFlagAndOptionalValue=t._combineFlagAndOptionalValue,this._allowExcessArguments=t._allowExcessArguments,this._enablePositionalOptions=t._enablePositionalOptions,this._showHelpAfterError=t._showHelpAfterError,this._showSuggestionAfterError=t._showSuggestionAfterError,this}command(t,e,i){let s=e,r=i;"object"==typeof s&&null!==s&&(r=s,s=null),r=r||{};const[,n,o]=t.match(/([^ ]+) *(.*)/),a=this.createCommand(n);return s&&(a.description(s),a._executableHandler=!0),r.isDefault&&(this._defaultCommandName=a._name),a._hidden=!(!r.noHelp&&!r.hidden),a._executableFile=r.executableFile||null,o&&a.arguments(o),this.commands.push(a),a.parent=this,a.copyInheritedSettings(this),s?this:a}createCommand(e){return new t(e)}createHelp(){return Object.assign(new H,this.configureHelp())}configureHelp(t){return void 0===t?this._helpConfiguration:(this._helpConfiguration=t,this)}configureOutput(t){return void 0===t?this._outputConfiguration:(Object.assign(this._outputConfiguration,t),this)}showHelpAfterError(t=!0){return"string"!=typeof t&&(t=!!t),this._showHelpAfterError=t,this}showSuggestionAfterError(t=!0){return this._showSuggestionAfterError=!!t,this}addCommand(t,e){if(!t._name)throw new Error("Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()");return(e=e||{}).isDefault&&(this._defaultCommandName=t._name),(e.noHelp||e.hidden)&&(t._hidden=!0),this.commands.push(t),t.parent=this,this}createArgument(t,e){return new G(t,e)}argument(t,e,i,s){const r=this.createArgument(t,e);return"function"==typeof i?r.default(s).argParser(i):r.default(i),this.addArgument(r),this}arguments(t){return t.split(/ +/).forEach((t=>{this.argument(t)})),this}addArgument(t){const e=this._args.slice(-1)[0];if(e&&e.variadic)throw new Error(`only the last argument can be variadic '${e.name()}'`);if(t.required&&void 0!==t.defaultValue&&void 0===t.parseArg)throw new Error(`a default value for a required argument is never used: '${t.name()}'`);return this._args.push(t),this}addHelpCommand(t,e){return!1===t?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,"string"==typeof t&&(this._helpCommandName=t.split(" ")[0],this._helpCommandnameAndArgs=t),this._helpCommandDescription=e||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return void 0===this._addImplicitHelpCommand?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(t,e){const i=["preSubcommand","preAction","postAction"];if(!i.includes(t))throw new Error(`Unexpected value for event passed to hook : '${t}'.\nExpecting one of '${i.join("', '")}'`);return this._lifeCycleHooks[t]?this._lifeCycleHooks[t].push(e):this._lifeCycleHooks[t]=[e],this}exitOverride(t){return this._exitCallback=t||(t=>{if("commander.executeSubCommandAsync"!==t.code)throw t}),this}_exit(t,e,i){this._exitCallback&&this._exitCallback(new B(t,e,i)),M.exit(t)}action(t){return this._actionHandler=e=>{const i=this._args.length,s=e.slice(0,i);return this._storeOptionsAsProperties?s[i]=this:s[i]=this.opts(),s.push(this),t.apply(this,s)},this}createOption(t,e){return new V(t,e)}addOption(t){const e=t.name(),i=t.attributeName();if(t.negate){const e=t.long.replace(/^--no-/,"--");this._findOption(e)||this.setOptionValueWithSource(i,void 0===t.defaultValue||t.defaultValue,"default")}else void 0!==t.defaultValue&&this.setOptionValueWithSource(i,t.defaultValue,"default");this.options.push(t);const s=(e,s,r)=>{null==e&&void 0!==t.presetArg&&(e=t.presetArg);const n=this.getOptionValue(i);if(null!==e&&t.parseArg)try{e=t.parseArg(e,n)}catch(t){if("commander.invalidArgument"===t.code){const e=`${s} ${t.message}`;this.error(e,{exitCode:t.exitCode,code:t.code})}throw t}else null!==e&&t.variadic&&(e=t._concatValue(e,n));null==e&&(e=!t.negate&&(!(!t.isBoolean()&&!t.optional)||"")),this.setOptionValueWithSource(i,e,r)};return this.on("option:"+e,(e=>{const i=`error: option '${t.flags}' argument '${e}' is invalid.`;s(e,i,"cli")})),t.envVar&&this.on("optionEnv:"+e,(e=>{const i=`error: option '${t.flags}' value '${e}' from env '${t.envVar}' is invalid.`;s(e,i,"env")})),this}_optionEx(t,e,i,s,r){if("object"==typeof e&&e instanceof V)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");const n=this.createOption(e,i);if(n.makeOptionMandatory(!!t.mandatory),"function"==typeof s)n.default(r).argParser(s);else if(s instanceof RegExp){const t=s;s=(e,i)=>{const s=t.exec(e);return s?s[0]:i},n.default(r).argParser(s)}else n.default(s);return this.addOption(n)}option(t,e,i,s){return this._optionEx({},t,e,i,s)}requiredOption(t,e,i,s){return this._optionEx({mandatory:!0},t,e,i,s)}combineFlagAndOptionalValue(t=!0){return this._combineFlagAndOptionalValue=!!t,this}allowUnknownOption(t=!0){return this._allowUnknownOption=!!t,this}allowExcessArguments(t=!0){return this._allowExcessArguments=!!t,this}enablePositionalOptions(t=!0){return this._enablePositionalOptions=!!t,this}passThroughOptions(t=!0){if(this._passThroughOptions=!!t,this.parent&&t&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(t=!0){if(this._storeOptionsAsProperties=!!t,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}getOptionValue(t){return this._storeOptionsAsProperties?this[t]:this._optionValues[t]}setOptionValue(t,e){return this.setOptionValueWithSource(t,e,void 0)}setOptionValueWithSource(t,e,i){return this._storeOptionsAsProperties?this[t]=e:this._optionValues[t]=e,this._optionValueSources[t]=i,this}getOptionValueSource(t){return this._optionValueSources[t]}getOptionValueSourceWithGlobals(t){let e;return Y(this).forEach((i=>{void 0!==i.getOptionValueSource(t)&&(e=i.getOptionValueSource(t))})),e}_prepareUserArgs(t,e){if(void 0!==t&&!Array.isArray(t))throw new Error("first parameter to parse must be array or undefined");let i;switch(e=e||{},void 0===t&&(t=M.argv,M.versions&&M.versions.electron&&(e.from="electron")),this.rawArgs=t.slice(),e.from){case void 0:case"node":this._scriptPath=t[1],i=t.slice(2);break;case"electron":M.defaultApp?(this._scriptPath=t[1],i=t.slice(2)):i=t.slice(1);break;case"user":i=t.slice(0);break;default:throw new Error(`unexpected parse option { from: '${e.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",i}parse(t,e){const i=this._prepareUserArgs(t,e);return this._parseCommand([],i),this}async parseAsync(t,e){const i=this._prepareUserArgs(t,e);return await this._parseCommand([],i),this}_executeSubCommand(t,e){e=e.slice();let i=!1;const s=[".js",".ts",".tsx",".mjs",".cjs"];function r(t,e){const i=j.resolve(t,e);if(D.existsSync(i))return i;if(s.includes(j.extname(e)))return;const r=s.find((t=>D.existsSync(`${i}${t}`)));return r?`${i}${r}`:void 0}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let n,o=t._executableFile||`${this._name}-${t._name}`,a=this._executableDir||"";if(this._scriptPath){let t;try{t=D.realpathSync(this._scriptPath)}catch(e){t=this._scriptPath}a=j.resolve(j.dirname(t),a)}if(a){let e=r(a,o);if(!e&&!t._executableFile&&this._scriptPath){const i=j.basename(this._scriptPath,j.extname(this._scriptPath));i!==this._name&&(e=r(a,`${i}-${t._name}`))}o=e||o}if(i=s.includes(j.extname(o)),"win32"!==M.platform?i?(e.unshift(o),e=X(M.execArgv).concat(e),n=L.spawn(M.argv[0],e,{stdio:"inherit"})):n=L.spawn(o,e,{stdio:"inherit"}):(e.unshift(o),e=X(M.execArgv).concat(e),n=L.spawn(M.execPath,e,{stdio:"inherit"})),!n.killed){["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((t=>{M.on(t,(()=>{!1===n.killed&&null===n.exitCode&&n.kill(t)}))}))}const l=this._exitCallback;l?n.on("close",(()=>{l(new B(M.exitCode||0,"commander.executeSubCommandAsync","(close)"))})):n.on("close",M.exit.bind(M)),n.on("error",(e=>{if("ENOENT"===e.code){const e=a?`searched for local subcommand relative to directory '${a}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",i=`'${o}' does not exist\n - if '${t._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${e}`;throw new Error(i)}if("EACCES"===e.code)throw new Error(`'${o}' not executable`);if(l){const t=new B(1,"commander.executeSubCommandAsync","(error)");t.nestedError=e,l(t)}else M.exit(1)})),this.runningCommand=n}_dispatchSubcommand(t,e,i){const s=this._findCommand(t);let r;return s||this.help({error:!0}),r=this._chainOrCallSubCommandHook(r,s,"preSubcommand"),r=this._chainOrCall(r,(()=>{if(!s._executableHandler)return s._parseCommand(e,i);this._executeSubCommand(s,e.concat(i))})),r}_checkNumberOfArguments(){this._args.forEach(((t,e)=>{t.required&&null==this.args[e]&&this.missingArgument(t.name())})),this._args.length>0&&this._args[this._args.length-1].variadic||this.args.length>this._args.length&&this._excessArguments(this.args)}_processArguments(){const t=(t,e,i)=>{let s=e;if(null!==e&&t.parseArg)try{s=t.parseArg(e,i)}catch(i){if("commander.invalidArgument"===i.code){const s=`error: command-argument value '${e}' is invalid for argument '${t.name()}'. ${i.message}`;this.error(s,{exitCode:i.exitCode,code:i.code})}throw i}return s};this._checkNumberOfArguments();const e=[];this._args.forEach(((i,s)=>{let r=i.defaultValue;i.variadic?s<this.args.length?(r=this.args.slice(s),i.parseArg&&(r=r.reduce(((e,s)=>t(i,s,e)),i.defaultValue))):void 0===r&&(r=[]):s<this.args.length&&(r=this.args[s],i.parseArg&&(r=t(i,r,i.defaultValue))),e[s]=r})),this.processedArgs=e}_chainOrCall(t,e){return t&&t.then&&"function"==typeof t.then?t.then((()=>e())):e()}_chainOrCallHooks(t,e){let i=t;const s=[];return Y(this).reverse().filter((t=>void 0!==t._lifeCycleHooks[e])).forEach((t=>{t._lifeCycleHooks[e].forEach((e=>{s.push({hookedCommand:t,callback:e})}))})),"postAction"===e&&s.reverse(),s.forEach((t=>{i=this._chainOrCall(i,(()=>t.callback(t.hookedCommand,this)))})),i}_chainOrCallSubCommandHook(t,e,i){let s=t;return void 0!==this._lifeCycleHooks[i]&&this._lifeCycleHooks[i].forEach((t=>{s=this._chainOrCall(s,(()=>t(this,e)))})),s}_parseCommand(t,e){const i=this.parseOptions(e);if(this._parseOptionsEnv(),this._parseOptionsImplied(),t=t.concat(i.operands),e=i.unknown,this.args=t.concat(e),t&&this._findCommand(t[0]))return this._dispatchSubcommand(t[0],t.slice(1),e);if(this._hasImplicitHelpCommand()&&t[0]===this._helpCommandName)return 1===t.length&&this.help(),this._dispatchSubcommand(t[1],[],[this._helpLongFlag]);if(this._defaultCommandName)return z(this,e),this._dispatchSubcommand(this._defaultCommandName,t,e);!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),z(this,i.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();const s=()=>{i.unknown.length>0&&this.unknownOption(i.unknown[0])},r=`command:${this.name()}`;if(this._actionHandler){let i;return s(),this._processArguments(),i=this._chainOrCallHooks(i,"preAction"),i=this._chainOrCall(i,(()=>this._actionHandler(this.processedArgs))),this.parent&&(i=this._chainOrCall(i,(()=>{this.parent.emit(r,t,e)}))),i=this._chainOrCallHooks(i,"postAction"),i}if(this.parent&&this.parent.listenerCount(r))s(),this._processArguments(),this.parent.emit(r,t,e);else if(t.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",t,e);this.listenerCount("command:*")?this.emit("command:*",t,e):this.commands.length?this.unknownCommand():(s(),this._processArguments())}else this.commands.length?(s(),this.help({error:!0})):(s(),this._processArguments())}_findCommand(t){if(t)return this.commands.find((e=>e._name===t||e._aliases.includes(t)))}_findOption(t){return this.options.find((e=>e.is(t)))}_checkForMissingMandatoryOptions(){for(let t=this;t;t=t.parent)t.options.forEach((e=>{e.mandatory&&void 0===t.getOptionValue(e.attributeName())&&t.missingMandatoryOptionValue(e)}))}_checkForConflictingLocalOptions(){const t=this.options.filter((t=>{const e=t.attributeName();return void 0!==this.getOptionValue(e)&&"default"!==this.getOptionValueSource(e)})),e=t.filter((t=>t.conflictsWith.length>0));e.forEach((e=>{const i=t.find((t=>e.conflictsWith.includes(t.attributeName())));i&&this._conflictingOption(e,i)}))}_checkForConflictingOptions(){for(let t=this;t;t=t.parent)t._checkForConflictingLocalOptions()}parseOptions(t){const e=[],i=[];let s=e;const r=t.slice();function n(t){return t.length>1&&"-"===t[0]}let o=null;for(;r.length;){const t=r.shift();if("--"===t){s===i&&s.push(t),s.push(...r);break}if(!o||n(t)){if(o=null,n(t)){const e=this._findOption(t);if(e){if(e.required){const t=r.shift();void 0===t&&this.optionMissingArgument(e),this.emit(`option:${e.name()}`,t)}else if(e.optional){let t=null;r.length>0&&!n(r[0])&&(t=r.shift()),this.emit(`option:${e.name()}`,t)}else this.emit(`option:${e.name()}`);o=e.variadic?e:null;continue}}if(t.length>2&&"-"===t[0]&&"-"!==t[1]){const e=this._findOption(`-${t[1]}`);if(e){e.required||e.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${e.name()}`,t.slice(2)):(this.emit(`option:${e.name()}`),r.unshift(`-${t.slice(2)}`));continue}}if(/^--[^=]+=/.test(t)){const e=t.indexOf("="),i=this._findOption(t.slice(0,e));if(i&&(i.required||i.optional)){this.emit(`option:${i.name()}`,t.slice(e+1));continue}}if(n(t)&&(s=i),(this._enablePositionalOptions||this._passThroughOptions)&&0===e.length&&0===i.length){if(this._findCommand(t)){e.push(t),r.length>0&&i.push(...r);break}if(t===this._helpCommandName&&this._hasImplicitHelpCommand()){e.push(t),r.length>0&&e.push(...r);break}if(this._defaultCommandName){i.push(t),r.length>0&&i.push(...r);break}}if(this._passThroughOptions){s.push(t),r.length>0&&s.push(...r);break}s.push(t)}else this.emit(`option:${o.name()}`,t)}return{operands:e,unknown:i}}opts(){if(this._storeOptionsAsProperties){const t={},e=this.options.length;for(let i=0;i<e;i++){const e=this.options[i].attributeName();t[e]=e===this._versionOptionName?this._version:this[e]}return t}return this._optionValues}optsWithGlobals(){return Y(this).reduce(((t,e)=>Object.assign(t,e.opts())),{})}error(t,e){this._outputConfiguration.outputError(`${t}\n`,this._outputConfiguration.writeErr),"string"==typeof this._showHelpAfterError?this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`):this._showHelpAfterError&&(this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0}));const i=e||{},s=i.exitCode||1,r=i.code||"commander.error";this._exit(s,r,t)}_parseOptionsEnv(){this.options.forEach((t=>{if(t.envVar&&t.envVar in M.env){const e=t.attributeName();(void 0===this.getOptionValue(e)||["default","config","env"].includes(this.getOptionValueSource(e)))&&(t.required||t.optional?this.emit(`optionEnv:${t.name()}`,M.env[t.envVar]):this.emit(`optionEnv:${t.name()}`))}}))}_parseOptionsImplied(){const t=new q(this.options),e=t=>void 0!==this.getOptionValue(t)&&!["default","implied"].includes(this.getOptionValueSource(t));this.options.filter((i=>void 0!==i.implied&&e(i.attributeName())&&t.valueFromOption(this.getOptionValue(i.attributeName()),i))).forEach((t=>{Object.keys(t.implied).filter((t=>!e(t))).forEach((e=>{this.setOptionValueWithSource(e,t.implied[e],"implied")}))}))}missingArgument(t){const e=`error: missing required argument '${t}'`;this.error(e,{code:"commander.missingArgument"})}optionMissingArgument(t){const e=`error: option '${t.flags}' argument missing`;this.error(e,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(t){const e=`error: required option '${t.flags}' not specified`;this.error(e,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(t,e){const i=t=>{const e=t.attributeName(),i=this.getOptionValue(e),s=this.options.find((t=>t.negate&&e===t.attributeName())),r=this.options.find((t=>!t.negate&&e===t.attributeName()));return s&&(void 0===s.presetArg&&!1===i||void 0!==s.presetArg&&i===s.presetArg)?s:r||t},s=t=>{const e=i(t),s=e.attributeName();return"env"===this.getOptionValueSource(s)?`environment variable '${e.envVar}'`:`option '${e.flags}'`},r=`error: ${s(t)} cannot be used with ${s(e)}`;this.error(r,{code:"commander.conflictingOption"})}unknownOption(t){if(this._allowUnknownOption)return;let e="";if(t.startsWith("--")&&this._showSuggestionAfterError){let i=[],s=this;do{const t=s.createHelp().visibleOptions(s).filter((t=>t.long)).map((t=>t.long));i=i.concat(t),s=s.parent}while(s&&!s._enablePositionalOptions);e=W(t,i)}const i=`error: unknown option '${t}'${e}`;this.error(i,{code:"commander.unknownOption"})}_excessArguments(t){if(this._allowExcessArguments)return;const e=this._args.length,i=1===e?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${e} argument${i} but got ${t.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){const t=this.args[0];let e="";if(this._showSuggestionAfterError){const i=[];this.createHelp().visibleCommands(this).forEach((t=>{i.push(t.name()),t.alias()&&i.push(t.alias())})),e=W(t,i)}const i=`error: unknown command '${t}'${e}`;this.error(i,{code:"commander.unknownCommand"})}version(t,e,i){if(void 0===t)return this._version;this._version=t,e=e||"-V, --version",i=i||"output the version number";const s=this.createOption(e,i);return this._versionOptionName=s.attributeName(),this.options.push(s),this.on("option:"+s.name(),(()=>{this._outputConfiguration.writeOut(`${t}\n`),this._exit(0,"commander.version",t)})),this}description(t,e){return void 0===t&&void 0===e?this._description:(this._description=t,e&&(this._argsDescription=e),this)}summary(t){return void 0===t?this._summary:(this._summary=t,this)}alias(t){if(void 0===t)return this._aliases[0];let e=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(e=this.commands[this.commands.length-1]),t===e._name)throw new Error("Command alias can't be the same as its name");return e._aliases.push(t),this}aliases(t){return void 0===t?this._aliases:(t.forEach((t=>this.alias(t))),this)}usage(t){if(void 0===t){if(this._usage)return this._usage;const t=this._args.map((t=>F(t)));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?t:[]).join(" ")}return this._usage=t,this}name(t){return void 0===t?this._name:(this._name=t,this)}nameFromFilename(t){return this._name=j.basename(t,j.extname(t)),this}executableDir(t){return void 0===t?this._executableDir:(this._executableDir=t,this)}helpInformation(t){const e=this.createHelp();return void 0===e.helpWidth&&(e.helpWidth=t&&t.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),e.formatHelp(this,e)}_getHelpContext(t){const e={error:!!(t=t||{}).error};let i;return i=e.error?t=>this._outputConfiguration.writeErr(t):t=>this._outputConfiguration.writeOut(t),e.write=t.write||i,e.command=this,e}outputHelp(t){let e;"function"==typeof t&&(e=t,t=void 0);const i=this._getHelpContext(t);Y(this).reverse().forEach((t=>t.emit("beforeAllHelp",i))),this.emit("beforeHelp",i);let s=this.helpInformation(i);if(e&&(s=e(s),"string"!=typeof s&&!Buffer.isBuffer(s)))throw new Error("outputHelp callback must return a string or a Buffer");i.write(s),this.emit(this._helpLongFlag),this.emit("afterHelp",i),Y(this).forEach((t=>t.emit("afterAllHelp",i)))}helpOption(t,e){if("boolean"==typeof t)return this._hasHelpOption=t,this;this._helpFlags=t||this._helpFlags,this._helpDescription=e||this._helpDescription;const i=U(this._helpFlags);return this._helpShortFlag=i.shortFlag,this._helpLongFlag=i.longFlag,this}help(t){this.outputHelp(t);let e=M.exitCode||0;0===e&&t&&"function"!=typeof t&&t.error&&(e=1),this._exit(e,"commander.help","(outputHelp)")}addHelpText(t,e){const i=["beforeAll","before","after","afterAll"];if(!i.includes(t))throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${i.join("', '")}'`);const s=`${t}Help`;return this.on(s,(t=>{let i;i="function"==typeof e?e({error:t.error,command:t.command}):e,i&&t.write(`${i}\n`)})),this}},function(t,e){const{Argument:i}=O,{Command:s}=A,{CommanderError:r,InvalidArgumentError:n}=x,{Help:o}=S,{Option:a}=$;(e=t.exports=new s).program=e,e.Argument=i,e.Command=s,e.CommanderError=r,e.Help=o,e.InvalidArgumentError=n,e.InvalidOptionArgumentError=n,e.Option=a}(E,E.exports);var K=v(E.exports);const{program:Z,createCommand:J,createArgument:Q,createOption:tt,CommanderError:et,InvalidArgumentError:it,InvalidOptionArgumentError:st,Command:rt,Argument:nt,Option:ot,Help:at}=K;var lt,ht={},ct={exports:{}},ut={exports:{}};const pt=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,dt=()=>{const t={enabled:"undefined"!=typeof process&&"0"!==process.env.FORCE_COLOR,visible:!0,styles:{},keys:{}},e=(t,e,i)=>"function"==typeof t?t(e):t.wrap(e,i),i=(i,s)=>{if(""===i||null==i)return"";if(!1===t.enabled)return i;if(!1===t.visible)return"";let r=""+i,n=r.includes("\n"),o=s.length;for(o>0&&s.includes("unstyle")&&(s=[...new Set(["unstyle",...s])].reverse());o-- >0;)r=e(t.styles[s[o]],r,n);return r},s=(e,s,r)=>{t.styles[e]=(t=>{let e=t.open=`[${t.codes[0]}m`,i=t.close=`[${t.codes[1]}m`,s=t.regex=new RegExp(`\\u001b\\[${t.codes[1]}m`,"g");return t.wrap=(t,r)=>{t.includes(i)&&(t=t.replace(s,i+e));let n=e+t+i;return r?n.replace(/\r*\n/g,`${i}$&${e}`):n},t})({name:e,codes:s}),(t.keys[r]||(t.keys[r]=[])).push(e),Reflect.defineProperty(t,e,{configurable:!0,enumerable:!0,set(i){t.alias(e,i)},get(){let s=t=>i(t,s.stack);return Reflect.setPrototypeOf(s,t),s.stack=this.stack?this.stack.concat(e):[e],s}})};return s("reset",[0,0],"modifier"),s("bold",[1,22],"modifier"),s("dim",[2,22],"modifier"),s("italic",[3,23],"modifier"),s("underline",[4,24],"modifier"),s("inverse",[7,27],"modifier"),s("hidden",[8,28],"modifier"),s("strikethrough",[9,29],"modifier"),s("black",[30,39],"color"),s("red",[31,39],"color"),s("green",[32,39],"color"),s("yellow",[33,39],"color"),s("blue",[34,39],"color"),s("magenta",[35,39],"color"),s("cyan",[36,39],"color"),s("white",[37,39],"color"),s("gray",[90,39],"color"),s("grey",[90,39],"color"),s("bgBlack",[40,49],"bg"),s("bgRed",[41,49],"bg"),s("bgGreen",[42,49],"bg"),s("bgYellow",[43,49],"bg"),s("bgBlue",[44,49],"bg"),s("bgMagenta",[45,49],"bg"),s("bgCyan",[46,49],"bg"),s("bgWhite",[47,49],"bg"),s("blackBright",[90,39],"bright"),s("redBright",[91,39],"bright"),s("greenBright",[92,39],"bright"),s("yellowBright",[93,39],"bright"),s("blueBright",[94,39],"bright"),s("magentaBright",[95,39],"bright"),s("cyanBright",[96,39],"bright"),s("whiteBright",[97,39],"bright"),s("bgBlackBright",[100,49],"bgBright"),s("bgRedBright",[101,49],"bgBright"),s("bgGreenBright",[102,49],"bgBright"),s("bgYellowBright",[103,49],"bgBright"),s("bgBlueBright",[104,49],"bgBright"),s("bgMagentaBright",[105,49],"bgBright"),s("bgCyanBright",[106,49],"bgBright"),s("bgWhiteBright",[107,49],"bgBright"),t.ansiRegex=pt,t.hasColor=t.hasAnsi=e=>(t.ansiRegex.lastIndex=0,"string"==typeof e&&""!==e&&t.ansiRegex.test(e)),t.alias=(e,s)=>{let r="string"==typeof s?t[s]:s;if("function"!=typeof r)throw new TypeError("Expected alias to be the name of an existing color (string) or a function");r.stack||(Reflect.defineProperty(r,"name",{value:e}),t.styles[e]=r,r.stack=[e]),Reflect.defineProperty(t,e,{configurable:!0,enumerable:!0,set(i){t.alias(e,i)},get(){let e=t=>i(t,e.stack);return Reflect.setPrototypeOf(e,t),e.stack=this.stack?this.stack.concat(r.stack):r.stack,e}})},t.theme=e=>{if(null===(i=e)||"object"!=typeof i||Array.isArray(i))throw new TypeError("Expected theme to be an object");var i;for(let i of Object.keys(e))t.alias(i,e[i]);return t},t.alias("unstyle",(e=>"string"==typeof e&&""!==e?(t.ansiRegex.lastIndex=0,e.replace(t.ansiRegex,"")):"")),t.alias("noop",(t=>t)),t.none=t.clear=t.noop,t.stripColor=t.unstyle,t.symbols=(lt||(lt=1,function(t){const e="undefined"!=typeof process&&"Hyper"===process.env.TERM_PROGRAM,i="undefined"!=typeof process&&"win32"===process.platform,s="undefined"!=typeof process&&"linux"===process.platform,r={ballotDisabled:"☒",ballotOff:"☐",ballotOn:"☑",bullet:"•",bulletWhite:"◦",fullBlock:"█",heart:"❤",identicalTo:"≡",line:"─",mark:"※",middot:"·",minus:"－",multiplication:"×",obelus:"÷",pencilDownRight:"✎",pencilRight:"✏",pencilUpRight:"✐",percent:"%",pilcrow2:"❡",pilcrow:"¶",plusMinus:"±",question:"?",section:"§",starsOff:"☆",starsOn:"★",upDownArrow:"↕"},n=Object.assign({},r,{check:"√",cross:"×",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"»",radioOff:"( )",radioOn:"(*)",warning:"‼"}),o=Object.assign({},r,{ballotCross:"✘",check:"✔",cross:"✖",ellipsisLarge:"⋯",ellipsis:"…",info:"ℹ",questionFull:"？",questionSmall:"﹖",pointer:s?"▸":"❯",pointerSmall:s?"‣":"›",radioOff:"◯",radioOn:"◉",warning:"⚠"});t.exports=i&&!e?n:o,Reflect.defineProperty(t.exports,"common",{enumerable:!1,value:r}),Reflect.defineProperty(t.exports,"windows",{enumerable:!1,value:n}),Reflect.defineProperty(t.exports,"other",{enumerable:!1,value:o})}(ut)),ut.exports),t.define=s,t};ct.exports=dt(),ct.exports.create=dt;var mt=ct.exports;!function(t){const e=Object.prototype.toString,i=mt;let s=!1,r=[];const n={yellow:"blue",cyan:"red",green:"magenta",black:"white",blue:"yellow",red:"cyan",magenta:"green",white:"black"};t.longest=(t,e)=>t.reduce(((t,i)=>Math.max(t,e?i[e].length:i.length)),0),t.hasColor=t=>!!t&&i.hasColor(t);const o=t.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t);t.nativeType=t=>e.call(t).slice(8,-1).toLowerCase().replace(/\s/g,""),t.isAsyncFn=e=>"asyncfunction"===t.nativeType(e),t.isPrimitive=t=>null!=t&&"object"!=typeof t&&"function"!=typeof t,t.resolve=(t,e,...i)=>"function"==typeof e?e.call(t,...i):e,t.scrollDown=(t=[])=>[...t.slice(1),t[0]],t.scrollUp=(t=[])=>[t.pop(),...t],t.reorder=(t=[])=>{let e=t.slice();return e.sort(((t,e)=>t.index>e.index?1:t.index<e.index?-1:0)),e},t.swap=(t,e,i)=>{let s=t.length,r=i===s?0:i<0?s-1:i,n=t[e];t[e]=t[r],t[r]=n},t.width=(t,e=80)=>{let i=t&&t.columns?t.columns:e;return t&&"function"==typeof t.getWindowSize&&(i=t.getWindowSize()[0]),"win32"===process.platform?i-1:i},t.height=(t,e=20)=>{let i=t&&t.rows?t.rows:e;return t&&"function"==typeof t.getWindowSize&&(i=t.getWindowSize()[1]),i},t.wordWrap=(t,e={})=>{if(!t)return t;"number"==typeof e&&(e={width:e});let{indent:i="",newline:s="\n"+i,width:r=80}=e,n=(s+i).match(/[^\S\n]/g)||[];r-=n.length;let o=`.{1,${r}}([\\s\\u200B]+|$)|[^\\s\\u200B]+?([\\s\\u200B]+|$)`,a=t.trim(),l=new RegExp(o,"g"),h=a.match(l)||[];return h=h.map((t=>t.replace(/\n$/,""))),e.padEnd&&(h=h.map((t=>t.padEnd(r," ")))),e.padStart&&(h=h.map((t=>t.padStart(r," ")))),i+h.join(s)},t.unmute=t=>{let e=t.stack.find((t=>i.keys.color.includes(t)));return e?i[e]:t.stack.find((t=>"bg"===t.slice(2)))?i[e.slice(2)]:t=>t},t.pascal=t=>t?t[0].toUpperCase()+t.slice(1):"",t.inverse=e=>{if(!e||!e.stack)return e;let s=e.stack.find((t=>i.keys.color.includes(t)));if(s){let r=i["bg"+t.pascal(s)];return r?r.black:e}let r=e.stack.find((t=>"bg"===t.slice(0,2)));return r?i[r.slice(2).toLowerCase()]||e:i.none},t.complement=e=>{if(!e||!e.stack)return e;let s=e.stack.find((t=>i.keys.color.includes(t))),r=e.stack.find((t=>"bg"===t.slice(0,2)));if(s&&!r)return i[n[s]||s];if(r){let s=r.slice(2).toLowerCase(),o=n[s];return o&&i["bg"+t.pascal(o)]||e}return i.none},t.meridiem=t=>{let e=t.getHours(),i=t.getMinutes(),s=e>=12?"pm":"am";return e%=12,(0===e?12:e)+":"+(i<10?"0"+i:i)+" "+s},t.set=(e={},i="",s)=>i.split(".").reduce(((e,i,r,n)=>{let o=n.length-1>r?e[i]||{}:s;return!t.isObject(o)&&r<n.length-1&&(o={}),e[i]=o}),e),t.get=(t={},e="",i)=>{let s=null==t[e]?e.split(".").reduce(((t,e)=>t&&t[e]),t):t[e];return null==s?i:s},t.mixin=(e,i)=>{if(!o(e))return i;if(!o(i))return e;for(let s of Object.keys(i)){let r=Object.getOwnPropertyDescriptor(i,s);if(r.hasOwnProperty("value"))if(e.hasOwnProperty(s)&&o(r.value)){let n=Object.getOwnPropertyDescriptor(e,s);o(n.value)?e[s]=t.merge({},e[s],i[s]):Reflect.defineProperty(e,s,r)}else Reflect.defineProperty(e,s,r);else Reflect.defineProperty(e,s,r)}return e},t.merge=(...e)=>{let i={};for(let s of e)t.mixin(i,s);return i},t.mixinEmitter=(e,i)=>{let s=i.constructor.prototype;for(let r of Object.keys(s)){let n=s[r];"function"==typeof n?t.define(e,r,n.bind(i)):t.define(e,r,n)}},t.onExit=t=>{const e=(t,e)=>{s||(s=!0,r.forEach((t=>t())),!0===t&&process.exit(128+e))};0===r.length&&(process.once("SIGTERM",e.bind(null,!0,15)),process.once("SIGINT",e.bind(null,!0,2)),process.once("exit",e)),r.push(t)},t.define=(t,e,i)=>{Reflect.defineProperty(t,e,{value:i})},t.defineExport=(t,e,i)=>{let s;Reflect.defineProperty(t,e,{enumerable:!0,configurable:!0,set(t){s=t},get:()=>s?s():i()})}}(ht);var ft,gt,bt,yt,wt,vt,Et,Ot,xt,_t,Ct,At,St,It={};function $t(){return ft||(ft=1,It.ctrl={a:"first",b:"backward",c:"cancel",d:"deleteForward",e:"last",f:"forward",g:"reset",i:"tab",k:"cutForward",l:"reset",n:"newItem",m:"cancel",j:"submit",p:"search",r:"remove",s:"save",u:"undo",w:"cutLeft",x:"toggleCursor",v:"paste"},It.shift={up:"shiftUp",down:"shiftDown",left:"shiftLeft",right:"shiftRight",tab:"prev"},It.fn={up:"pageUp",down:"pageDown",left:"pageLeft",right:"pageRight",delete:"deleteForward"},It.option={b:"backward",f:"forward",d:"cutRight",left:"cutLeft",up:"altUp",down:"altDown"},It.keys={pageup:"pageUp",pagedown:"pageDown",home:"home",end:"end",cancel:"cancel",delete:"deleteForward",backspace:"delete",down:"down",enter:"submit",escape:"cancel",left:"left",space:"space",number:"number",return:"submit",right:"right",tab:"next",up:"up"}),It}function Tt(){if(wt)return yt;function t(t,e,i={}){let s=t.timers[e]={name:e,start:Date.now(),ms:0,tick:0},r=i.interval||120;s.frames=i.frames||[],s.loading=!0;let n=setInterval((()=>{s.ms=Date.now()-s.start,s.tick++,t.render()}),r);return s.stop=()=>{s.loading=!1,clearInterval(n)},Reflect.defineProperty(s,"interval",{value:n}),t.once("close",(()=>s.stop())),s.stop}return wt=1,yt=e=>{e.timers=e.timers||{};let i=e.options.timers;if(i)for(let s of Object.keys(i)){let r=i[s];"number"==typeof r&&(r={interval:r}),t(e,s,r)}},yt}function Rt(){if(St)return At;St=1;const t=function(){if(xt)return Ot;xt=1;const t=ht,e=mt,i={default:e.noop,noop:e.noop,set inverse(t){this._inverse=t},get inverse(){return this._inverse||t.inverse(this.primary)},set complement(t){this._complement=t},get complement(){return this._complement||t.complement(this.primary)},primary:e.cyan,success:e.green,danger:e.magenta,strong:e.bold,warning:e.yellow,muted:e.dim,disabled:e.gray,dark:e.dim.gray,underline:e.underline,set info(t){this._info=t},get info(){return this._info||this.primary},set em(t){this._em=t},get em(){return this._em||this.primary.underline},set heading(t){this._heading=t},get heading(){return this._heading||this.muted.underline},set pending(t){this._pending=t},get pending(){return this._pending||this.primary},set submitted(t){this._submitted=t},get submitted(){return this._submitted||this.success},set cancelled(t){this._cancelled=t},get cancelled(){return this._cancelled||this.danger},set typing(t){this._typing=t},get typing(){return this._typing||this.dim},set placeholder(t){this._placeholder=t},get placeholder(){return this._placeholder||this.primary.dim},set highlight(t){this._highlight=t},get highlight(){return this._highlight||this.inverse},merge:(s={})=>{s.styles&&"boolean"==typeof s.styles.enabled&&(e.enabled=s.styles.enabled),s.styles&&"boolean"==typeof s.styles.visible&&(e.visible=s.styles.visible);let r=t.merge({},i,s.styles);delete r.merge;for(let t of Object.keys(e))r.hasOwnProperty(t)||Reflect.defineProperty(r,t,{get:()=>e[t]});for(let t of Object.keys(e.styles))r.hasOwnProperty(t)||Reflect.defineProperty(r,t,{get:()=>e[t]});return r}};return Ot=i}(),e=function(){if(Ct)return _t;Ct=1;const t="win32"===process.platform,e=mt,i=ht,s={...e.symbols,upDownDoubleArrow:"⇕",upDownDoubleArrow2:"⬍",upDownArrow:"↕",asterisk:"*",asterism:"⁂",bulletWhite:"◦",electricArrow:"⌁",ellipsisLarge:"⋯",ellipsisSmall:"…",fullBlock:"█",identicalTo:"≡",indicator:e.symbols.check,leftAngle:"‹",mark:"※",minus:"−",multiplication:"×",obelus:"÷",percent:"%",pilcrow:"¶",pilcrow2:"❡",pencilUpRight:"✐",pencilDownRight:"✎",pencilRight:"✏",plus:"+",plusMinus:"±",pointRight:"☞",rightAngle:"›",section:"§",hexagon:{off:"⬡",on:"⬢",disabled:"⬢"},ballot:{on:"☑",off:"☐",disabled:"☒"},stars:{on:"★",off:"☆",disabled:"☆"},folder:{on:"▼",off:"▶",disabled:"▶"},prefix:{pending:e.symbols.question,submitted:e.symbols.check,cancelled:e.symbols.cross},separator:{pending:e.symbols.pointerSmall,submitted:e.symbols.middot,cancelled:e.symbols.middot},radio:{off:t?"( )":"◯",on:t?"(*)":"◉",disabled:t?"(|)":"Ⓘ"},numbers:["⓪","①","②","③","④","⑤","⑥","⑦","⑧","⑨","⑩","⑪","⑫","⑬","⑭","⑮","⑯","⑰","⑱","⑲","⑳","㉑","㉒","㉓","㉔","㉕","㉖","㉗","㉘","㉙","㉚","㉛","㉜","㉝","㉞","㉟","㊱","㊲","㊳","㊴","㊵","㊶","㊷","㊸","㊹","㊺","㊻","㊼","㊽","㊾","㊿"]};return s.merge=t=>{let r=i.merge({},e.symbols,s,t.symbols);return delete r.merge,r},_t=s}(),i=ht;return At=s=>{s.options=i.merge({},s.options.theme,s.options),s.symbols=e.merge(s.options),s.styles=t.merge(s.options)},At}var kt,Pt,Nt,Lt={exports:{}};function jt(){return kt||(kt=1,function(t,e){const i="Apple_Terminal"===process.env.TERM_PROGRAM,s=mt,r=ht,n=t.exports=e,o="[";let a=!1;const l=n.code={bell:"",beep:"",beginning:`${o}G`,down:`${o}J`,esc:o,getPosition:`${o}6n`,hide:`${o}?25l`,line:`${o}2K`,lineEnd:`${o}K`,lineStart:`${o}1K`,restorePosition:o+(i?"8":"u"),savePosition:o+(i?"7":"s"),screen:`${o}2J`,show:`${o}?25h`,up:`${o}1J`},h=n.cursor={get hidden(){return a},hide:()=>(a=!0,l.hide),show:()=>(a=!1,l.show),forward:(t=1)=>`${o}${t}C`,backward:(t=1)=>`${o}${t}D`,nextLine:(t=1)=>`${o}E`.repeat(t),prevLine:(t=1)=>`${o}F`.repeat(t),up:(t=1)=>t?`${o}${t}A`:"",down:(t=1)=>t?`${o}${t}B`:"",right:(t=1)=>t?`${o}${t}C`:"",left:(t=1)=>t?`${o}${t}D`:"",to:(t,e)=>e?`${o}${e+1};${t+1}H`:`${o}${t+1}G`,move(t=0,e=0){let i="";return i+=t<0?h.left(-t):t>0?h.right(t):"",i+=e<0?h.up(-e):e>0?h.down(e):"",i},restore(t={}){let{after:e,cursor:i,initial:s,input:o,prompt:a,size:l,value:h}=t;if(s=r.isPrimitive(s)?String(s):"",o=r.isPrimitive(o)?String(o):"",h=r.isPrimitive(h)?String(h):"",l){let t=n.cursor.up(l)+n.cursor.to(a.length),e=o.length-i;return e>0&&(t+=n.cursor.left(e)),t}if(h||e){let t=!o&&s?-s.length:-o.length+i;return e&&(t-=e.length),""===o&&s&&!a.includes(s)&&(t+=s.length),n.cursor.move(t)}}},c=n.erase={screen:l.screen,up:l.up,down:l.down,line:l.line,lineEnd:l.lineEnd,lineStart:l.lineStart,lines(t){let e="";for(let i=0;i<t;i++)e+=n.erase.line+(i<t-1?n.cursor.up(1):"");return t&&(e+=n.code.beginning),e}};n.clear=(t="",e=process.stdout.columns)=>{if(!e)return c.line+h.to(0);let i=t.split(/\r?\n/),r=0;for(let t of i)r+=1+Math.floor(Math.max((n=t,[...s.unstyle(n)].length-1),0)/e);var n;return(c.line+h.prevLine()).repeat(r-1)+c.line+h.to(0)}}(Lt,Lt.exports)),Lt.exports}function Dt(){if(Nt)return Pt;Nt=1;const t=i,e=mt,s=function(){if(bt)return gt;bt=1;const t=l,e=$t(),i=/^(?:\x1b)([a-zA-Z0-9])$/,s=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/,r={OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end","[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end",Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end","[Z":"tab"},n=(t="",e={})=>{let n,o={name:e.name,ctrl:!1,meta:!1,shift:!1,option:!1,sequence:t,raw:t,...e};if(Buffer.isBuffer(t)?t[0]>127&&void 0===t[1]?(t[0]-=128,t=""+String(t)):t=String(t):void 0!==t&&"string"!=typeof t?t=String(t):t||(t=o.sequence||""),o.sequence=o.sequence||t||o.name,"\r"===t)o.raw=void 0,o.name="return";else if("\n"===t)o.name="enter";else if("\t"===t)o.name="tab";else if("\b"===t||""===t||""===t||"\b"===t)o.name="backspace",o.meta=""===t.charAt(0);else if(""===t||""===t)o.name="escape",o.meta=2===t.length;else if(" "===t||" "===t)o.name="space",o.meta=2===t.length;else if(t<="")o.name=String.fromCharCode(t.charCodeAt(0)+"a".charCodeAt(0)-1),o.ctrl=!0;else if(1===t.length&&t>="0"&&t<="9")o.name="number";else if(1===t.length&&t>="a"&&t<="z")o.name=t;else if(1===t.length&&t>="A"&&t<="Z")o.name=t.toLowerCase(),o.shift=!0;else if(n=i.exec(t))o.meta=!0,o.shift=/^[A-Z]$/.test(n[1]);else if(n=s.exec(t)){let e=[...t];""===e[0]&&""===e[1]&&(o.option=!0);let i=[n[1],n[2],n[4],n[6]].filter(Boolean).join(""),s=(n[3]||n[5]||1)-1;o.ctrl=!!(4&s),o.meta=!!(10&s),o.shift=!!(1&s),o.code=i,o.name=r[i],o.shift=function(t){return["[a","[b","[c","[d","[e","[2$","[3$","[5$","[6$","[7$","[8$","[Z"].includes(t)}(i)||o.shift,o.ctrl=function(t){return["Oa","Ob","Oc","Od","Oe","[2^","[3^","[5^","[6^","[7^","[8^"].includes(t)}(i)||o.ctrl}return o};return n.listen=(e={},i)=>{let{stdin:s}=e;if(!s||s!==process.stdin&&!s.isTTY)throw new Error("Invalid stream passed");let r=t.createInterface({terminal:!0,input:s});t.emitKeypressEvents(s,r);let o=(t,e)=>i(t,n(t,e),r),a=s.isRaw;return s.isTTY&&s.setRawMode(!0),s.on("keypress",o),r.resume(),()=>{s.isTTY&&s.setRawMode(a),s.removeListener("keypress",o),r.pause(),r.close()}},n.action=(t,i,s)=>{let r={...e,...s};return i.ctrl?(i.action=r.ctrl[i.name],i):i.option&&r.option?(i.action=r.option[i.name],i):i.shift?(i.action=r.shift[i.name],i):(i.action=r.keys[i.name],i)},gt=n}(),r=Tt(),n=function(){if(Et)return vt;Et=1;const{define:t,width:e}=ht;return vt=class{constructor(i){let s=i.options;t(this,"_prompt",i),this.type=i.type,this.name=i.name,this.message="",this.header="",this.footer="",this.error="",this.hint="",this.input="",this.cursor=0,this.index=0,this.lines=0,this.tick=0,this.prompt="",this.buffer="",this.width=e(s.stdout||process.stdout),Object.assign(this,s),this.name=this.name||this.message,this.message=this.message||this.name,this.symbols=i.symbols,this.styles=i.styles,this.required=new Set,this.cancelled=!1,this.submitted=!1}clone(){let t={...this};return t.status=this.status,t.buffer=Buffer.from(t.buffer),delete t.clone,t}set color(t){this._color=t}get color(){let t=this.prompt.styles;if(this.cancelled)return t.cancelled;if(this.submitted)return t.submitted;let e=this._color||t[this.status];return"function"==typeof e?e:t.pending}set loading(t){this._loading=t}get loading(){return"boolean"==typeof this._loading?this._loading:!!this.loadingChoices&&"choices"}get status(){return this.cancelled?"cancelled":this.submitted?"submitted":"pending"}},vt}(),o=Rt(),a=ht,h=jt();class c extends t{constructor(t={}){super(),this.name=t.name,this.type=t.type,this.options=t,o(this),r(this),this.state=new n(this),this.initial=[t.initial,t.default].find((t=>null!=t)),this.stdout=t.stdout||process.stdout,this.stdin=t.stdin||process.stdin,this.scale=t.scale||1,this.term=this.options.term||process.env.TERM_PROGRAM,this.margin=function(t){"number"==typeof t&&(t=[t,t,t,t]);let e=[].concat(t||[]),i=t=>t%2==0?"\n":" ",s=[];for(let t=0;t<4;t++){let r=i(t);e[t]?s.push(r.repeat(e[t])):s.push("")}return s}(this.options.margin),this.setMaxListeners(0),function(t){let e=e=>void 0===t[e]||"function"==typeof t[e],i=["actions","choices","initial","margin","roles","styles","symbols","theme","timers","value"],s=["body","footer","error","header","hint","indicator","message","prefix","separator","skip"];for(let r of Object.keys(t.options)){if(i.includes(r))continue;if(/^on[A-Z]/.test(r))continue;let n=t.options[r];"function"==typeof n&&e(r)?s.includes(r)||(t[r]=n.bind(t)):"function"!=typeof t[r]&&(t[r]=n)}}(this)}async keypress(t,e={}){this.keypressed=!0;let i=s.action(t,s(t,e),this.options.actions);this.state.keypress=i,this.emit("keypress",t,i),this.emit("state",this.state.clone());let r=this.options[i.action]||this[i.action]||this.dispatch;if("function"==typeof r)return await r.call(this,t,i);this.alert()}alert(){delete this.state.alert,!1===this.options.show?this.emit("alert"):this.stdout.write(h.code.beep)}cursorHide(){this.stdout.write(h.cursor.hide()),a.onExit((()=>this.cursorShow()))}cursorShow(){this.stdout.write(h.cursor.show())}write(t){t&&(this.stdout&&!1!==this.state.show&&this.stdout.write(t),this.state.buffer+=t)}clear(t=0){let e=this.state.buffer;this.state.buffer="",(e||t)&&!1!==this.options.show&&this.stdout.write(h.cursor.down(t)+h.clear(e,this.width))}restore(){if(this.state.closed||!1===this.options.show)return;let{prompt:t,after:e,rest:i}=this.sections(),{cursor:s,initial:r="",input:n="",value:o=""}=this,a={after:e,cursor:s,initial:r,input:n,prompt:t,size:this.state.size=i.length,value:o},l=h.cursor.restore(a);l&&this.stdout.write(l)}sections(){let{buffer:t,input:i,prompt:s}=this.state;s=e.unstyle(s);let r=e.unstyle(t),n=r.indexOf(s),o=r.slice(0,n),a=r.slice(n).split("\n"),l=a[0],h=a[a.length-1],c=(s+(i?" "+i:"")).length,u=c<l.length?l.slice(c+1):"";return{header:o,prompt:l,after:u,rest:a.slice(1),last:h}}async submit(){this.state.submitted=!0,this.state.validating=!0,this.options.onSubmit&&await this.options.onSubmit.call(this,this.name,this.value,this);let t=this.state.error||await this.validate(this.value,this.state);if(!0!==t){let e="\n"+this.symbols.pointer+" ";return e+="string"==typeof t?t.trim():"Invalid input",this.state.error="\n"+this.styles.danger(e),this.state.submitted=!1,await this.render(),await this.alert(),this.state.validating=!1,void(this.state.error=void 0)}this.state.validating=!1,await this.render(),await this.close(),this.value=await this.result(this.value),this.emit("submit",this.value)}async cancel(t){this.state.cancelled=this.state.submitted=!0,await this.render(),await this.close(),"function"==typeof this.options.onCancel&&await this.options.onCancel.call(this,this.name,this.value,this),this.emit("cancel",await this.error(t))}async close(){this.state.closed=!0;try{let t=this.sections(),e=Math.ceil(t.prompt.length/this.width);t.rest&&this.write(h.cursor.down(t.rest.length)),this.write("\n".repeat(e))}catch(t){}this.emit("close")}start(){this.stop||!1===this.options.show||(this.stop=s.listen(this,this.keypress.bind(this)),this.once("close",this.stop))}async skip(){return this.skipped=!0===this.options.skip,"function"==typeof this.options.skip&&(this.skipped=await this.options.skip.call(this,this.name,this.value)),this.skipped}async initialize(){let{format:t,options:e,result:i}=this;if(this.format=()=>t.call(this,this.value),this.result=()=>i.call(this,this.value),"function"==typeof e.initial&&(this.initial=await e.initial.call(this,this)),"function"==typeof e.onRun&&await e.onRun.call(this,this),"function"==typeof e.onSubmit){let t=e.onSubmit.bind(this),i=this.submit.bind(this);delete this.options.onSubmit,this.submit=async()=>(await t(this.name,this.value,this),i())}await this.start(),await this.render()}render(){throw new Error("expected prompt to have a custom render method")}run(){return new Promise((async(t,e)=>{if(this.once("submit",t),this.once("cancel",e),await this.skip())return this.render=()=>{},this.submit();await this.initialize(),this.emit("run")}))}async element(t,e,i){let{options:s,state:r,symbols:n,timers:o}=this,a=o&&o[t];r.timer=a;let l=s[t]||r[t]||n[t],h=e&&null!=e[t]?e[t]:await l;if(""===h)return h;let c=await this.resolve(h,r,e,i);return!c&&e&&e[t]?this.resolve(l,r,e,i):c}async prefix(){let t=await this.element("prefix")||this.symbols,e=this.timers&&this.timers.prefix,i=this.state;if(i.timer=e,a.isObject(t)&&(t=t[i.status]||t.pending),!a.hasColor(t)){return(this.styles[i.status]||this.styles.pending)(t)}return t}async message(){let t=await this.element("message");return a.hasColor(t)?t:this.styles.strong(t)}async separator(){let t=await this.element("separator")||this.symbols,e=this.timers&&this.timers.separator,i=this.state;i.timer=e;let s=t[i.status]||t.pending||i.separator,r=await this.resolve(s,i);return a.isObject(r)&&(r=r[i.status]||r.pending),a.hasColor(r)?r:this.styles.muted(r)}async pointer(t,e){let i=await this.element("pointer",t,e);if("string"==typeof i&&a.hasColor(i))return i;if(i){let t=this.styles,s=this.index===e,r=s?t.primary:t=>t,n=await this.resolve(i[s?"on":"off"]||i,this.state),o=a.hasColor(n)?n:r(n);return s?o:" ".repeat(n.length)}}async indicator(t,e){let i=await this.element("indicator",t,e);if("string"==typeof i&&a.hasColor(i))return i;if(i){let e=this.styles,s=!0===t.enabled,r=s?e.success:e.dark,n=i[s?"on":"off"]||i;return a.hasColor(n)?n:r(n)}return""}body(){return null}footer(){if("pending"===this.state.status)return this.element("footer")}header(){if("pending"===this.state.status)return this.element("header")}async hint(){if("pending"===this.state.status&&!this.isValue(this.state.input)){let t=await this.element("hint");return a.hasColor(t)?t:this.styles.muted(t)}}error(t){return this.state.submitted?"":t||this.state.error}format(t){return t}result(t){return t}validate(t){return!0!==this.options.required||this.isValue(t)}isValue(t){return null!=t&&""!==t}resolve(t,...e){return a.resolve(this,t,...e)}get base(){return c.prototype}get style(){return this.styles[this.state.status]}get height(){return this.options.rows||a.height(this.stdout,25)}get width(){return this.options.columns||a.width(this.stdout,80)}get size(){return{width:this.width,height:this.height}}set cursor(t){this.state.cursor=t}get cursor(){return this.state.cursor}set input(t){this.state.input=t}get input(){return this.state.input}set value(t){this.state.value=t}get value(){let{input:t,value:e}=this.state,i=[e,t].find(this.isValue.bind(this));return this.isValue(i)?i:this.initial}static get prompt(){return t=>new this(t).run()}}return Pt=c}var Mt,Gt,Ft,Bt,Ht,Vt,Ut,qt,Wt,zt,Xt,Yt,Kt,Zt,Jt,Qt,te,ee,ie,se,re,ne,oe,ae,le,he,ce,ue,pe,de,me,fe,ge,be,ye,we,ve,Ee,Oe,xe,_e,Ce,Ae,Se,Ie,$e,Te,Re,ke,Pe,Ne,Le,je,De,Me,Ge,Fe,Be,He,Ve={};function Ue(){if(Bt)return Ft;Bt=1;const t=mt,e=Dt(),i=function(){if(Gt)return Mt;Gt=1;const t=ht,e={default:(t,e)=>e,checkbox(t,e){throw new Error("checkbox role is not implemented yet")},editable(t,e){throw new Error("editable role is not implemented yet")},expandable(t,e){throw new Error("expandable role is not implemented yet")},heading:(t,e)=>(e.disabled="",e.indicator=[e.indicator," "].find((t=>null!=t)),e.message=e.message||"",e),input(t,e){throw new Error("input role is not implemented yet")},option:(t,i)=>e.default(t,i),radio(t,e){throw new Error("radio role is not implemented yet")},separator:(t,e)=>(e.disabled="",e.indicator=[e.indicator," "].find((t=>null!=t)),e.message=e.message||t.symbols.line.repeat(5),e),spacer:(t,e)=>e};return Mt=(i,s={})=>{let r=t.merge({},e,s.roles);return r[i]||r.default},Mt}(),s=ht,{reorder:r,scrollUp:n,scrollDown:o,isObject:a,swap:l}=s;function h(t,e){if(e instanceof Promise)return e;if("function"==typeof e){if(s.isAsyncFn(e))return e;e=e.call(t,t)}for(let i of e){if(Array.isArray(i.choices)){let e=i.choices.filter((e=>!t.isDisabled(e)));i.enabled=e.every((t=>!0===t.enabled))}!0===t.isDisabled(i)&&delete i.enabled}return e}return Ft=class extends e{constructor(t){super(t),this.cursorHide(),this.maxSelected=t.maxSelected||1/0,this.multiple=t.multiple||!1,this.initial=t.initial||0,this.delay=t.delay||0,this.longest=0,this.num=""}async initialize(){"function"==typeof this.options.initial&&(this.initial=await this.options.initial.call(this)),await this.reset(!0),await super.initialize()}async reset(){let{choices:t,initial:e,autofocus:i,suggest:s}=this.options;if(this.state._choices=[],this.state.choices=[],this.choices=await Promise.all(await this.toChoices(t)),this.choices.forEach((t=>t.enabled=!1)),"function"!=typeof s&&0===this.selectable.length)throw new Error("At least one choice must be selectable");a(e)&&(e=Object.keys(e)),Array.isArray(e)?(null!=i&&(this.index=this.findIndex(i)),e.forEach((t=>this.enable(this.find(t)))),await this.render()):(null!=i&&(e=i),"string"==typeof e&&(e=this.findIndex(e)),"number"==typeof e&&e>-1&&(this.index=Math.max(0,Math.min(e,this.choices.length)),this.enable(this.find(this.index)))),this.isDisabled(this.focused)&&await this.down()}async toChoices(t,e){this.state.loadingChoices=!0;let i=[],s=0,r=async(t,e)=>{"function"==typeof t&&(t=await t.call(this)),t instanceof Promise&&(t=await t);for(let n=0;n<t.length;n++){let o=t[n]=await this.toChoice(t[n],s++,e);i.push(o),o.choices&&await r(o.choices,o)}return i};return r(t,e).then((t=>(this.state.loadingChoices=!1,t)))}async toChoice(e,r,n){if("function"==typeof e&&(e=await e.call(this,this)),e instanceof Promise&&(e=await e),"string"==typeof e&&(e={name:e}),e.normalized)return e;e.normalized=!0;let o=e.value,a=i(e.role,this.options);if("string"!=typeof(e=a(this,e)).disabled||e.hint||(e.hint=e.disabled,e.disabled=!0),!0===e.disabled&&null==e.hint&&(e.hint="(disabled)"),null!=e.index)return e;e.name=e.name||e.key||e.title||e.value||e.message,e.message=e.message||e.name||"",e.value=[e.value,e.name].find(this.isValue.bind(this)),e.input="",e.index=r,e.cursor=0,s.define(e,"parent",n),e.level=n?n.level+1:1,null==e.indent&&(e.indent=n?n.indent+"  ":e.indent||""),e.path=n?n.path+"."+e.name:e.name,e.enabled=!(!this.multiple||this.isDisabled(e)||!e.enabled&&!this.isSelected(e)),this.isDisabled(e)||(this.longest=Math.max(this.longest,t.unstyle(e.message).length));let l={...e};return e.reset=(t=l.input,i=l.value)=>{for(let t of Object.keys(l))e[t]=l[t];e.input=t,e.value=i},null==o&&"function"==typeof e.initial&&(e.input=await e.initial.call(this,this.state,e,r)),e}async onChoice(t,e){this.emit("choice",t,e,this),"function"==typeof t.onChoice&&await t.onChoice.call(this,this.state,t,e)}async addChoice(t,e,i){let s=await this.toChoice(t,e,i);return this.choices.push(s),this.index=this.choices.length-1,this.limit=this.choices.length,s}async newItem(t,e,i){let s={name:"New choice name?",editable:!0,newChoice:!0,...t},r=await this.addChoice(s,e,i);return r.updateChoice=()=>{delete r.newChoice,r.name=r.message=r.input,r.input="",r.cursor=0},this.render()}indent(t){return null==t.indent?t.level>1?"  ".repeat(t.level-1):"":t.indent}dispatch(t,e){if(this.multiple&&this[e.name])return this[e.name]();this.alert()}focus(t,e){return"boolean"!=typeof e&&(e=t.enabled),e&&!t.enabled&&this.selected.length>=this.maxSelected?this.alert():(this.index=t.index,t.enabled=e&&!this.isDisabled(t),t)}space(){return this.multiple?(this.toggle(this.focused),this.render()):this.alert()}a(){if(this.maxSelected<this.choices.length)return this.alert();let t=this.selectable.every((t=>t.enabled));return this.choices.forEach((e=>e.enabled=!t)),this.render()}i(){return this.choices.length-this.selected.length>this.maxSelected?this.alert():(this.choices.forEach((t=>t.enabled=!t.enabled)),this.render())}g(t=this.focused){return this.choices.some((t=>!!t.parent))?(this.toggle(t.parent&&!t.choices?t.parent:t),this.render()):this.a()}toggle(t,e){if(!t.enabled&&this.selected.length>=this.maxSelected)return this.alert();"boolean"!=typeof e&&(e=!t.enabled),t.enabled=e,t.choices&&t.choices.forEach((t=>this.toggle(t,e)));let i=t.parent;for(;i;){let t=i.choices.filter((t=>this.isDisabled(t)));i.enabled=t.every((t=>!0===t.enabled)),i=i.parent}return h(this,this.choices),this.emit("toggle",t,this),t}enable(t){return this.selected.length>=this.maxSelected?this.alert():(t.enabled=!this.isDisabled(t),t.choices&&t.choices.forEach(this.enable.bind(this)),t)}disable(t){return t.enabled=!1,t.choices&&t.choices.forEach(this.disable.bind(this)),t}number(t){this.num+=t;let e=t=>{let e=Number(t);if(e>this.choices.length-1)return this.alert();let i=this.focused,s=this.choices.find((t=>e===t.index));if(!s.enabled&&this.selected.length>=this.maxSelected)return this.alert();if(-1===this.visible.indexOf(s)){let t=r(this.choices),e=t.indexOf(s);if(i.index>e){let i=t.slice(e,e+this.limit),s=t.filter((t=>!i.includes(t)));this.choices=i.concat(s)}else{let i=e-this.limit+1;this.choices=t.slice(i).concat(t.slice(0,i))}}return this.index=this.choices.indexOf(s),this.toggle(this.focused),this.render()};return clearTimeout(this.numberTimeout),new Promise((t=>{let i=this.choices.length,s=this.num,r=(i=!1,r)=>{clearTimeout(this.numberTimeout),i&&(r=e(s)),this.num="",t(r)};return"0"===s||1===s.length&&Number(s+"0")>i?r(!0):Number(s)>i?r(!1,this.alert()):void(this.numberTimeout=setTimeout((()=>r(!0)),this.delay))}))}home(){return this.choices=r(this.choices),this.index=0,this.render()}end(){let t=this.choices.length-this.limit,e=r(this.choices);return this.choices=e.slice(t).concat(e.slice(0,t)),this.index=this.limit-1,this.render()}first(){return this.index=0,this.render()}last(){return this.index=this.visible.length-1,this.render()}prev(){return this.visible.length<=1?this.alert():this.up()}next(){return this.visible.length<=1?this.alert():this.down()}right(){return this.cursor>=this.input.length?this.alert():(this.cursor++,this.render())}left(){return this.cursor<=0?this.alert():(this.cursor--,this.render())}up(){let t=this.choices.length,e=this.visible.length,i=this.index;return!1===this.options.scroll&&0===i?this.alert():t>e&&0===i?this.scrollUp():(this.index=(i-1%t+t)%t,this.isDisabled()?this.up():this.render())}down(){let t=this.choices.length,e=this.visible.length,i=this.index;return!1===this.options.scroll&&i===e-1?this.alert():t>e&&i===e-1?this.scrollDown():(this.index=(i+1)%t,this.isDisabled()?this.down():this.render())}scrollUp(t=0){return this.choices=n(this.choices),this.index=t,this.isDisabled()?this.up():this.render()}scrollDown(t=this.visible.length-1){return this.choices=o(this.choices),this.index=t,this.isDisabled()?this.down():this.render()}async shiftUp(){return!0===this.options.sort?(this.sorting=!0,this.swap(this.index-1),await this.up(),void(this.sorting=!1)):this.scrollUp(this.index)}async shiftDown(){return!0===this.options.sort?(this.sorting=!0,this.swap(this.index+1),await this.down(),void(this.sorting=!1)):this.scrollDown(this.index)}pageUp(){return this.visible.length<=1?this.alert():(this.limit=Math.max(this.limit-1,0),this.index=Math.min(this.limit-1,this.index),this._limit=this.limit,this.isDisabled()?this.up():this.render())}pageDown(){return this.visible.length>=this.choices.length?this.alert():(this.index=Math.max(0,this.index),this.limit=Math.min(this.limit+1,this.choices.length),this._limit=this.limit,this.isDisabled()?this.down():this.render())}swap(t){l(this.choices,this.index,t)}isDisabled(t=this.focused){return!(!t||!["disabled","collapsed","hidden","completing","readonly"].some((e=>!0===t[e])))||t&&"heading"===t.role}isEnabled(t=this.focused){if(Array.isArray(t))return t.every((t=>this.isEnabled(t)));if(t.choices){let e=t.choices.filter((t=>!this.isDisabled(t)));return t.enabled&&e.every((t=>this.isEnabled(t)))}return t.enabled&&!this.isDisabled(t)}isChoice(t,e){return t.name===e||t.index===Number(e)}isSelected(t){return Array.isArray(this.initial)?this.initial.some((e=>this.isChoice(t,e))):this.isChoice(t,this.initial)}map(t=[],e="value"){return[].concat(t||[]).reduce(((t,i)=>(t[i]=this.find(i,e),t)),{})}filter(t,e){let i="function"==typeof t?t:(e,i)=>[e.name,i].includes(t),s=(this.options.multiple?this.state._choices:this.choices).filter(i);return e?s.map((t=>t[e])):s}find(t,e){if(a(t))return e?t[e]:t;let i="function"==typeof t?t:(e,i)=>[e.name,i].includes(t),s=this.choices.find(i);return s?e?s[e]:s:void 0}findIndex(t){return this.choices.indexOf(this.find(t))}async submit(){let t=this.focused;if(!t)return this.alert();if(t.newChoice)return t.input?(t.updateChoice(),this.render()):this.alert();if(this.choices.some((t=>t.newChoice)))return this.alert();let{reorder:e,sort:i}=this.options,r=!0===this.multiple,n=this.selected;return void 0===n?this.alert():(Array.isArray(n)&&!1!==e&&!0!==i&&(n=s.reorder(n)),this.value=r?n.map((t=>t.name)):n.name,super.submit())}set choices(t=[]){this.state._choices=this.state._choices||[],this.state.choices=t;for(let e of t)this.state._choices.some((t=>t.name===e.name))||this.state._choices.push(e);if(!this._initial&&this.options.initial){this._initial=!0;let t=this.initial;if("string"==typeof t||"number"==typeof t){let e=this.find(t);e&&(this.initial=e.index,this.focus(e,!0))}}}get choices(){return h(this,this.state.choices||[])}set visible(t){this.state.visible=t}get visible(){return(this.state.visible||this.choices).slice(0,this.limit)}set limit(t){this.state.limit=t}get limit(){let{state:t,options:e,choices:i}=this,s=t.limit||this._limit||e.limit||i.length;return Math.min(s,this.height)}set value(t){super.value=t}get value(){return"string"!=typeof super.value&&super.value===this.initial?this.input:super.value}set index(t){this.state.index=t}get index(){return Math.max(0,this.state?this.state.index:0)}get enabled(){return this.filter(this.isEnabled.bind(this))}get focused(){let t=this.choices[this.index];return t&&this.state.submitted&&!0!==this.multiple&&(t.enabled=!0),t}get selectable(){return this.choices.filter((t=>!this.isDisabled(t)))}get selected(){return this.multiple?this.enabled:this.focused}},Ft}function qe(){if(Vt)return Ht;Vt=1;const t=Ue(),e=ht;return Ht=class extends t{constructor(t){super(t),this.emptyError=this.options.emptyError||"No items were selected"}async dispatch(t,e){if(this.multiple)return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e);this.alert()}separator(){if(this.options.separator)return super.separator();let t=this.styles.muted(this.symbols.ellipsis);return this.state.submitted?super.separator():t}pointer(t,e){return!this.multiple||this.options.pointer?super.pointer(t,e):""}indicator(t,e){return this.multiple?super.indicator(t,e):""}choiceMessage(t,i){let s=this.resolve(t.message,this.state,t,i);return"heading"!==t.role||e.hasColor(s)||(s=this.styles.strong(s)),this.resolve(s,this.state,t,i)}choiceSeparator(){return":"}async renderChoice(t,i){await this.onChoice(t,i);let s=this.index===i,r=await this.pointer(t,i),n=await this.indicator(t,i)+(t.pad||""),o=await this.resolve(t.hint,this.state,t,i);o&&!e.hasColor(o)&&(o=this.styles.muted(o));let a=this.indent(t),l=await this.choiceMessage(t,i),h=()=>[this.margin[3],a+r+n,l,this.margin[1],o].filter(Boolean).join(" ");return"heading"===t.role?h():t.disabled?(e.hasColor(l)||(l=this.styles.disabled(l)),h()):(s&&(l=this.styles.em(l)),h())}async renderChoices(){if("choices"===this.state.loading)return this.styles.warning("Loading choices");if(this.state.submitted)return"";let t=this.visible.map((async(t,e)=>await this.renderChoice(t,e))),e=await Promise.all(t);e.length||e.push(this.styles.danger("No matching choices"));let i,s=this.margin[0]+e.join("\n");return this.options.choicesHeader&&(i=await this.resolve(this.options.choicesHeader,this.state)),[i,s].filter(Boolean).join("\n")}format(){return!this.state.submitted||this.state.cancelled?"":Array.isArray(this.selected)?this.selected.map((t=>this.styles.primary(t.name))).join(", "):this.styles.primary(this.selected.name)}async render(){let{submitted:t,size:e}=this.state,i="",s=await this.header(),r=await this.prefix(),n=await this.separator(),o=await this.message();!1!==this.options.promptLine&&(i=[r,o,n,""].join(" "),this.state.prompt=i);let a=await this.format(),l=await this.error()||await this.hint(),h=await this.renderChoices(),c=await this.footer();a&&(i+=a),l&&!i.includes(l)&&(i+=" "+l),t&&!a&&!h.trim()&&this.multiple&&null!=this.emptyError&&(i+=this.styles.danger(this.emptyError)),this.clear(e),this.write([s,i,h,c].filter(Boolean).join("\n")),this.write(this.margin[2]),this.restore()}},Ht}function We(){if(zt)return Wt;zt=1;const t=ht;return Wt=(e,i={})=>{e.cursorHide();let{input:s="",initial:r="",pos:n,showCursor:o=!0,color:a}=i,l=a||e.styles.placeholder,h=t.inverse(e.styles.primary),c=t=>h(e.styles.black(t)),u=s,p=c(" ");if(e.blink&&!0===e.blink.off&&(c=t=>t,p=""),o&&0===n&&""===r&&""===s)return c(" ");if(o&&0===n&&(s===r||""===s))return c(r[0])+l(r.slice(1));r=t.isPrimitive(r)?`${r}`:"",s=t.isPrimitive(s)?`${s}`:"";let d=r&&r.startsWith(s)&&r!==s,m=d?c(r[s.length]):p;if(n!==s.length&&!0===o&&(u=s.slice(0,n)+c(s[n])+s.slice(n+1),m=""),!1===o&&(m=""),d){let t=e.styles.unstyle(u+m);return u+m+l(r.slice(t.length))}return u+m},Wt}function ze(){if(Yt)return Xt;Yt=1;const t=mt,e=qe(),i=We();return Xt=class extends e{constructor(t){super({...t,multiple:!0}),this.type="form",this.initial=this.options.initial,this.align=[this.options.align,"right"].find((t=>null!=t)),this.emptyError="",this.values={}}async reset(t){return await super.reset(),!0===t&&(this._index=this.index),this.index=this._index,this.values={},this.choices.forEach((t=>t.reset&&t.reset())),this.render()}dispatch(t){return!!t&&this.append(t)}append(t){let e=this.focused;if(!e)return this.alert();let{cursor:i,input:s}=e;return e.value=e.input=s.slice(0,i)+t+s.slice(i),e.cursor++,this.render()}delete(){let t=this.focused;if(!t||t.cursor<=0)return this.alert();let{cursor:e,input:i}=t;return t.value=t.input=i.slice(0,e-1)+i.slice(e),t.cursor--,this.render()}deleteForward(){let t=this.focused;if(!t)return this.alert();let{cursor:e,input:i}=t;if(void 0===i[e])return this.alert();let s=`${i}`.slice(0,e)+`${i}`.slice(e+1);return t.value=t.input=s,this.render()}right(){let t=this.focused;return t?t.cursor>=t.input.length?this.alert():(t.cursor++,this.render()):this.alert()}left(){let t=this.focused;return t?t.cursor<=0?this.alert():(t.cursor--,this.render()):this.alert()}space(t,e){return this.dispatch(t,e)}number(t,e){return this.dispatch(t,e)}next(){let t=this.focused;if(!t)return this.alert();let{initial:e,input:i}=t;return e&&e.startsWith(i)&&i!==e?(t.value=t.input=e,t.cursor=t.value.length,this.render()):super.next()}prev(){let t=this.focused;return t?0===t.cursor?super.prev():(t.value=t.input="",t.cursor=0,this.render()):this.alert()}separator(){return""}format(t){return this.state.submitted?"":super.format(t)}pointer(){return""}indicator(t){return t.input?"⦿":"⊙"}async choiceSeparator(t,e){let i=await this.resolve(t.separator,this.state,t,e)||":";return i?" "+this.styles.disabled(i):""}async renderChoice(e,s){await this.onChoice(e,s);let{state:r,styles:n}=this,{cursor:o,initial:a="",name:l,hint:h,input:c=""}=e,{muted:u,submitted:p,primary:d,danger:m}=n,f=h,g=this.index===s,b=e.validate||(()=>!0),y=await this.choiceSeparator(e,s),w=e.message;"right"===this.align&&(w=w.padStart(this.longest+1," ")),"left"===this.align&&(w=w.padEnd(this.longest+1," "));let v=this.values[l]=c||a,E=c?"success":"dark";!0!==await b.call(e,v,this.state)&&(E="danger");let O=(0,n[E])(await this.indicator(e,s))+(e.pad||""),x=this.indent(e),_=()=>[x,O,w+y,c,f].filter(Boolean).join(" ");if(r.submitted)return w=t.unstyle(w),c=p(c),f="",_();if(e.format)c=await e.format.call(this,c,e,s);else{let t=this.styles.muted;c=i(this,{input:c,initial:a,pos:o,showCursor:g,color:t})}return this.isValue(c)||(c=this.styles.muted(this.symbols.ellipsis)),e.result&&(this.values[l]=await e.result.call(this,v,e,s)),g&&(w=d(w)),e.error?c+=(c?" ":"")+m(e.error.trim()):e.hint&&(c+=(c?" ":"")+u(e.hint.trim())),_()}async submit(){return this.value=this.values,super.base.submit.call(this)}},Xt}function Xe(){if(Zt)return Kt;Zt=1;const t=ze(),e=()=>{throw new Error("expected prompt to have a custom authenticate method")},i=(s=e)=>class extends t{constructor(t){super(t)}async submit(){this.value=await s.call(this,this.values,this.state),super.base.submit.call(this)}static create(t){return i(t)}};return Kt=i()}function Ye(){if(ee)return te;ee=1;const t=Dt(),{isPrimitive:e,hasColor:i}=ht;return te=class extends t{constructor(t){super(t),this.cursorHide()}async initialize(){let t=await this.resolve(this.initial,this.state);this.input=await this.cast(t),await super.initialize()}dispatch(t){return this.isValue(t)?(this.input=t,this.submit()):this.alert()}format(t){let{styles:e,state:i}=this;return i.submitted?e.success(t):e.primary(t)}cast(t){return this.isTrue(t)}isTrue(t){return/^[ty1]/i.test(t)}isFalse(t){return/^[fn0]/i.test(t)}isValue(t){return e(t)&&(this.isTrue(t)||this.isFalse(t))}async hint(){if("pending"===this.state.status){let t=await this.element("hint");return i(t)?t:this.styles.muted(t)}}async render(){let{input:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=[i,await this.message(),this.styles.muted(this.default),s].filter(Boolean).join(" ");this.state.prompt=r;let n=await this.header(),o=this.value=this.cast(t),a=await this.format(o),l=await this.error()||await this.hint(),h=await this.footer();l&&!r.includes(l)&&(a+=" "+l),r+=" "+a,this.clear(e),this.write([n,r,h].filter(Boolean).join("\n")),this.restore()}set value(t){super.value=t}get value(){return this.cast(super.value)}},te}function Ke(){if(ae)return oe;ae=1;const t=Dt(),e=We(),{isPrimitive:i}=ht;return oe=class extends t{constructor(t){super(t),this.initial=i(this.initial)?String(this.initial):"",this.initial&&this.cursorHide(),this.state.prevCursor=0,this.state.clipboard=[]}async keypress(t,e={}){let i=this.state.prevKeypress;return this.state.prevKeypress=e,!0!==this.options.multiline||"return"!==e.name||i&&"return"===i.name?super.keypress(t,e):this.append("\n",e)}moveCursor(t){this.cursor+=t}reset(){return this.input=this.value="",this.cursor=0,this.render()}dispatch(t,e){if(!t||e.ctrl||e.code)return this.alert();this.append(t)}append(t){let{cursor:e,input:i}=this.state;this.input=`${i}`.slice(0,e)+t+`${i}`.slice(e),this.moveCursor(String(t).length),this.render()}insert(t){this.append(t)}delete(){let{cursor:t,input:e}=this.state;if(t<=0)return this.alert();this.input=`${e}`.slice(0,t-1)+`${e}`.slice(t),this.moveCursor(-1),this.render()}deleteForward(){let{cursor:t,input:e}=this.state;if(void 0===e[t])return this.alert();this.input=`${e}`.slice(0,t)+`${e}`.slice(t+1),this.render()}cutForward(){let t=this.cursor;if(this.input.length<=t)return this.alert();this.state.clipboard.push(this.input.slice(t)),this.input=this.input.slice(0,t),this.render()}cutLeft(){let t=this.cursor;if(0===t)return this.alert();let e=this.input.slice(0,t),i=this.input.slice(t),s=e.split(" ");this.state.clipboard.push(s.pop()),this.input=s.join(" "),this.cursor=this.input.length,this.input+=i,this.render()}paste(){if(!this.state.clipboard.length)return this.alert();this.insert(this.state.clipboard.pop()),this.render()}toggleCursor(){this.state.prevCursor?(this.cursor=this.state.prevCursor,this.state.prevCursor=0):(this.state.prevCursor=this.cursor,this.cursor=0),this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.input.length-1,this.render()}next(){let t=null!=this.initial?String(this.initial):"";if(!t||!t.startsWith(this.input))return this.alert();this.input=this.initial,this.cursor=this.initial.length,this.render()}prev(){if(!this.input)return this.alert();this.reset()}backward(){return this.left()}forward(){return this.right()}right(){return this.cursor>=this.input.length?this.alert():(this.moveCursor(1),this.render())}left(){return this.cursor<=0?this.alert():(this.moveCursor(-1),this.render())}isValue(t){return!!t}async format(t=this.value){let i=await this.resolve(this.initial,this.state);return this.state.submitted?this.styles.submitted(t||i):e(this,{input:t,initial:i,pos:this.cursor})}async render(){let t=this.state.size,e=await this.prefix(),i=await this.separator(),s=[e,await this.message(),i].filter(Boolean).join(" ");this.state.prompt=s;let r=await this.header(),n=await this.format(),o=await this.error()||await this.hint(),a=await this.footer();o&&!n.includes(o)&&(n+=" "+o),s+=" "+n,this.clear(t),this.write([r,s,a].filter(Boolean).join("\n")),this.restore()}},oe}function Ze(){if(he)return le;he=1;const t=t=>(t=>t.filter(((e,i)=>t.lastIndexOf(e)===i)))(t).filter(Boolean);return le=(e,i={},s="")=>{let r,n,{past:o=[],present:a=""}=i;switch(e){case"prev":case"undo":return r=o.slice(0,o.length-1),n=o[o.length-1]||"",{past:t([s,...r]),present:n};case"next":case"redo":return r=o.slice(1),n=o[0]||"",{past:t([...r,s]),present:n};case"save":return{past:t([...o,s]),present:""};case"remove":return n=t(o.filter((t=>t!==s))),a="",n.length&&(a=n.pop()),{past:n,present:a};default:throw new Error(`Invalid action: "${e}"`)}}}function Je(){if(ue)return ce;ue=1;const t=Ke(),e=Ze();return ce=class extends t{constructor(t){super(t);let e=this.options.history;if(e&&e.store){let t=e.values||this.initial;this.autosave=!!e.autosave,this.store=e.store,this.data=this.store.get("values")||{past:[],present:t},this.initial=this.data.present||this.data.past[this.data.past.length-1]}}completion(t){return this.store?(this.data=e(t,this.data,this.input),this.data.present?(this.input=this.data.present,this.cursor=this.input.length,this.render()):this.alert()):this.alert()}altUp(){return this.completion("prev")}altDown(){return this.completion("next")}prev(){return this.save(),super.prev()}save(){this.store&&(this.data=e("save",this.data,this.input),this.store.set("values",this.data))}submit(){return this.store&&!0===this.autosave&&this.save(),super.submit()}},ce}function Qe(){if(we)return ye;we=1;const t=Ke();return ye=class extends t{constructor(t={}){super({style:"number",...t}),this.min=this.isValue(t.min)?this.toNumber(t.min):-1/0,this.max=this.isValue(t.max)?this.toNumber(t.max):1/0,this.delay=null!=t.delay?t.delay:1e3,this.float=!1!==t.float,this.round=!0===t.round||!1===t.float,this.major=t.major||10,this.minor=t.minor||1,this.initial=null!=t.initial?t.initial:"",this.input=String(this.initial),this.cursor=this.input.length,this.cursorShow()}append(t){return!/[-+.]/.test(t)||"."===t&&this.input.includes(".")?this.alert("invalid number"):super.append(t)}number(t){return super.append(t)}next(){return this.input&&this.input!==this.initial?this.alert():this.isValue(this.initial)?(this.input=this.initial,this.cursor=String(this.initial).length,this.render()):this.alert()}up(t){let e=t||this.minor,i=this.toNumber(this.input);return i>this.max+e?this.alert():(this.input=`${i+e}`,this.render())}down(t){let e=t||this.minor,i=this.toNumber(this.input);return i<this.min-e?this.alert():(this.input=""+(i-e),this.render())}shiftDown(){return this.down(this.major)}shiftUp(){return this.up(this.major)}format(t=this.input){return"function"==typeof this.options.format?this.options.format.call(this,t):this.styles.info(t)}toNumber(t=""){return this.float?+t:Math.round(+t)}isValue(t){return/^[-+]?[0-9]+((\.)|(\.[0-9]+))?$/.test(t)}submit(){let t=[this.input,this.initial].find((t=>this.isValue(t)));return this.value=this.toNumber(t||0),super.submit()}},ye}function ti(){if(Se)return Ae;Se=1;const t=mt;class e{constructor(t){this.name=t.key,this.field=t.field||{},this.value=((t="")=>"string"==typeof t?t.replace(/^['"]|['"]$/g,""):"")(t.initial||this.field.initial||""),this.message=t.message||this.name,this.cursor=0,this.input="",this.lines=[]}}function i(t,e,i,s){return(i,r,n,o)=>"function"==typeof n.field[t]?n.field[t].call(e,i,r,n,o):[s,i].find((t=>e.isValue(t)))}return Ae=async s=>{let r=s.options,n=new Set(!0===r.required?[]:r.required||[]),o={...r.values,...r.initial},{tabstops:a,items:l,keys:h}=await(async(t={},i={},s=(t=>t))=>{let r=new Set,n=t.fields||[],o=t.template,a=[],l=[],h=[],c=1;"function"==typeof o&&(o=await o());let u=-1,p=()=>o[++u],d=()=>o[u+1],m=t=>{t.line=c,a.push(t)};for(m({type:"bos",value:""});u<o.length-1;){let t=p();if(/^[^\S\n ]$/.test(t)){m({type:"text",value:t});continue}if("\n"===t){m({type:"newline",value:t}),c++;continue}if("\\"===t){t+=p(),m({type:"text",value:t});continue}if(("$"===t||"#"===t||"{"===t)&&"{"===d()){t+=p();let o,a={type:"template",open:t,inner:"",close:"",value:t};for(;o=p();){if("}"===o){"}"===d()&&(o+=p()),a.value+=o,a.close=o;break}":"===o?(a.initial="",a.key=a.inner):void 0!==a.initial&&(a.initial+=o),a.value+=o,a.inner+=o}a.template=a.open+(a.initial||a.inner)+a.close,a.key=a.key||a.inner,i.hasOwnProperty(a.key)&&(a.initial=i[a.key]),a=s(a),m(a),h.push(a.key),r.add(a.key);let c=l.find((t=>t.name===a.key));a.field=n.find((t=>t.name===a.key)),c||(c=new e(a),l.push(c)),c.lines.push(a.line-1);continue}let o=a[a.length-1];"text"===o.type&&o.line===c?o.value+=t:m({type:"text",value:t})}return m({type:"eos",value:""}),{input:o,tabstops:a,unique:r,keys:h,items:l}})(r,o),c=i("result",s),u=i("format",s),p=i("validate",s,r,!0),d=s.isValue.bind(s);return async(e={},i=!1)=>{let o=0;e.required=n,e.items=l,e.keys=h,e.output="";let m=async(t,e,i,s)=>{let r=await p(t,e,i,s);return!1===r?"Invalid field "+i.name:r};for(let n of a){let a=n.value,h=n.key;if("template"===n.type){if("template"===n.type){let p=l.find((t=>t.name===h));!0===r.required&&e.required.add(p.name);let f=[p.input,e.values[p.value],p.value,a].find(d),g=(p.field||{}).message||n.inner;if(i){let i=await m(e.values[h],e,p,o);if(i&&"string"==typeof i||!1===i){e.invalid.set(h,i);continue}e.invalid.delete(h);let s=await c(e.values[h],e,p,o);e.output+=t.unstyle(s);continue}p.placeholder=!1;let b=a;a=await u(a,e,p,o),f!==a?(e.values[h]=f,a=s.styles.typing(f),e.missing.delete(g)):(e.values[h]=void 0,f=`<${g}>`,a=s.styles.primary(f),p.placeholder=!0,e.required.has(h)&&e.missing.add(g)),e.missing.has(g)&&e.validating&&(a=s.styles.warning(f)),e.invalid.has(h)&&e.validating&&(a=s.styles.danger(f)),o===e.index&&(a=b!==a?s.styles.underline(a):s.styles.heading(t.unstyle(a))),o++}a&&(e.output+=a)}else a&&(e.output+=a)}let f=e.output.split("\n").map((t=>" "+t)),g=l.length,b=0;for(let t of l)e.invalid.has(t.name)&&t.lines.forEach((t=>{" "===f[t][0]&&(f[t]=e.styles.danger(e.symbols.bullet)+f[t].slice(1))})),s.isValue(e.values[t.name])&&b++;return e.completed=(b/g*100).toFixed(0),e.output=f.join("\n"),e.output}},Ae}function ei(){if(Pe)return ke;Pe=1;const t=Ue();function e(t,e={}){if(Array.isArray(e.scale))return e.scale.map((t=>({...t})));let i=[];for(let e=1;e<t+1;e++)i.push({i:e,selected:!1});return i}return ke=class extends t{constructor(t={}){if(super(t),this.emptyError=t.emptyError||"No items were selected",this.term=process.env.TERM_PROGRAM,!this.options.header){let t=["","4 - Strongly Agree","3 - Agree","2 - Neutral","1 - Disagree","0 - Strongly Disagree",""];t=t.map((t=>this.styles.muted(t))),this.state.header=t.join("\n   ")}}async toChoices(...t){if(this.createdScales)return!1;this.createdScales=!0;let i=await super.toChoices(...t);for(let t of i)t.scale=e(5,this.options),t.scaleIdx=2;return i}dispatch(){this.alert()}space(){let t=this.focused,e=t.scale[t.scaleIdx],i=e.selected;return t.scale.forEach((t=>t.selected=!1)),e.selected=!i,this.render()}indicator(){return""}pointer(){return""}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;return t.scaleIdx>=t.scale.length-1?this.alert():(t.scaleIdx++,this.render())}left(){let t=this.focused;return t.scaleIdx<=0?this.alert():(t.scaleIdx--,this.render())}indent(){return"   "}async renderChoice(t,e){await this.onChoice(t,e);let i=this.index===e,s="Hyper"===this.term,r=s?9:8,n=s?"":" ",o=this.symbols.line.repeat(r),a=" ".repeat(r+(s?0:1)),l=t=>(t?this.styles.success("◉"):"◯")+n,h=e+1+".",c=i?this.styles.heading:this.styles.noop,u=await this.resolve(t.message,this.state,t,e),p=this.indent(t),d=p+t.scale.map(((e,i)=>l(i===t.scaleIdx))).join(o),m=p+t.scale.map(((e,i)=>(e=>e===t.scaleIdx?c(e):e)(i))).join(a);return i&&(d=this.styles.cyan(d),m=this.styles.cyan(m)),[[h,u].filter(Boolean).join(" "),d,m," "].filter(Boolean).join("\n")}async renderChoices(){if(this.state.submitted)return"";let t=this.visible.map((async(t,e)=>await this.renderChoice(t,e))),e=await Promise.all(t);return e.length||e.push(this.styles.danger("No matching choices")),e.join("\n")}format(){if(this.state.submitted){return this.choices.map((t=>this.styles.info(t.scaleIdx))).join(", ")}return""}async render(){let{submitted:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=[i,await this.message(),s].filter(Boolean).join(" ");this.state.prompt=r;let n=await this.header(),o=await this.format(),a=await this.error()||await this.hint(),l=await this.renderChoices(),h=await this.footer();!o&&a||(r+=" "+o),a&&!r.includes(a)&&(r+=" "+a),t&&!o&&!l&&this.multiple&&"form"!==this.type&&(r+=this.styles.danger(this.emptyError)),this.clear(e),this.write([r,n,l,h].filter(Boolean).join("\n")),this.restore()}submit(){this.value={};for(let t of this.choices)this.value[t.name]=t.scaleIdx;return this.base.submit.call(this)}},ke}function ii(){return Fe||(Fe=1,function(t){const e=ht,i=(i,s)=>{e.defineExport(t,i,s),e.defineExport(t,i.toLowerCase(),s)};i("AutoComplete",(()=>function(){if(qt)return Ut;qt=1;const t=qe();return Ut=class extends t{constructor(t){super(t),this.cursorShow()}moveCursor(t){this.state.cursor+=t}dispatch(t){return this.append(t)}space(t){return this.options.multiple?super.space(t):this.append(t)}append(t){let{cursor:e,input:i}=this.state;return this.input=i.slice(0,e)+t+i.slice(e),this.moveCursor(1),this.complete()}delete(){let{cursor:t,input:e}=this.state;return e?(this.input=e.slice(0,t-1)+e.slice(t),this.moveCursor(-1),this.complete()):this.alert()}deleteForward(){let{cursor:t,input:e}=this.state;return void 0===e[t]?this.alert():(this.input=`${e}`.slice(0,t)+`${e}`.slice(t+1),this.complete())}number(t){return this.append(t)}async complete(){this.completing=!0,this.choices=await this.suggest(this.input,this.state._choices),this.state.limit=void 0,this.index=Math.min(Math.max(this.visible.length-1,0),this.index),await this.render(),this.completing=!1}suggest(t=this.input,e=this.state._choices){if("function"==typeof this.options.suggest)return this.options.suggest.call(this,t,e);let i=t.toLowerCase();return e.filter((t=>t.message.toLowerCase().includes(i)))}pointer(){return""}format(){if(!this.focused)return this.input;if(this.options.multiple&&this.state.submitted)return this.selected.map((t=>this.styles.primary(t.message))).join(", ");if(this.state.submitted){let t=this.value=this.input=this.focused.value;return this.styles.primary(t)}return this.input}async render(){if("pending"!==this.state.status)return super.render();let t=this.options.highlight?this.options.highlight.bind(this):this.styles.placeholder,e=((t,e)=>{let i=t.toLowerCase();return t=>{let s=t.toLowerCase().indexOf(i),r=e(t.slice(s,s+i.length));return s>=0?t.slice(0,s)+r+t.slice(s+i.length):t}})(this.input,t),i=this.choices;this.choices=i.map((t=>({...t,message:e(t.message)}))),await super.render(),this.choices=i}submit(){return this.options.multiple&&(this.value=this.selected.map((t=>t.name))),super.submit()}},Ut}())),i("BasicAuth",(()=>function(){if(Qt)return Jt;Qt=1;const t=Xe();function e(t,e){return t.username===this.options.username&&t.password===this.options.password}const i=(s=e)=>{const r=[{name:"username",message:"username"},{name:"password",message:"password",format(t){return this.options.showPassword?t:(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(t.length))}}];class n extends(t.create(s)){constructor(t){super({...t,choices:r})}static create(t){return i(t)}}return n};return Jt=i()}())),i("Confirm",(()=>function(){if(se)return ie;se=1;const t=Ye();return ie=class extends t{constructor(t){super(t),this.default=this.options.default||(this.initial?"(Y/n)":"(y/N)")}},ie}())),i("Editable",(()=>function(){if(ne)return re;ne=1;const t=qe(),e=ze().prototype;return re=class extends t{constructor(t){super({...t,multiple:!0}),this.align=[this.options.align,"left"].find((t=>null!=t)),this.emptyError="",this.values={}}dispatch(t,i){let s=this.focused,r=s.parent||{};return s.editable||r.editable||"a"!==t&&"i"!==t?e.dispatch.call(this,t,i):super[t]()}append(t,i){return e.append.call(this,t,i)}delete(t,i){return e.delete.call(this,t,i)}space(t){return this.focused.editable?this.append(t):super.space()}number(t){return this.focused.editable?this.append(t):super.number(t)}next(){return this.focused.editable?e.next.call(this):super.next()}prev(){return this.focused.editable?e.prev.call(this):super.prev()}async indicator(t,e){let i=t.indicator||"",s=t.editable?i:super.indicator(t,e);return await this.resolve(s,this.state,t,e)||""}indent(t){return"heading"===t.role?"":t.editable?" ":"  "}async renderChoice(t,i){return t.indent="",t.editable?e.renderChoice.call(this,t,i):super.renderChoice(t,i)}error(){return""}footer(){return this.state.error}async validate(){let t=!0;for(let e of this.choices){if("function"!=typeof e.validate)continue;if("heading"===e.role)continue;let i=e.parent?this.value[e.parent.name]:this.value;if(e.editable?i=e.value===e.name?e.initial||"":e.value:this.isDisabled(e)||(i=!0===e.enabled),t=await e.validate(i,this.state),!0!==t)break}return!0!==t&&(this.state.error="string"==typeof t?t:"Invalid Input"),t}submit(){if(!0===this.focused.newChoice)return super.submit();if(this.choices.some((t=>t.newChoice)))return this.alert();this.value={};for(let t of this.choices){let e=t.parent?this.value[t.parent.name]:this.value;"heading"!==t.role?t.editable?e[t.name]=t.value===t.name?t.initial||"":t.value:this.isDisabled(t)||(e[t.name]=!0===t.enabled):this.value[t.name]={}}return this.base.submit.call(this)}},re}())),i("Form",(()=>ze())),i("Input",(()=>Je())),i("Invisible",(()=>function(){if(de)return pe;de=1;const t=Ke();return pe=class extends t{format(){return""}}}())),i("List",(()=>function(){if(fe)return me;fe=1;const t=Ke();return me=class extends t{constructor(t={}){super(t),this.sep=this.options.separator||/, */,this.initial=t.initial||""}split(t=this.value){return t?String(t).split(this.sep):[]}format(){let t=this.state.submitted?this.styles.primary:t=>t;return this.list.map(t).join(", ")}async submit(t){let e=this.state.error||await this.validate(this.list,this.state);return!0!==e?(this.state.error=e,super.submit()):(this.value=this.list,super.submit())}get list(){return this.split()}},me}())),i("MultiSelect",(()=>function(){if(be)return ge;be=1;const t=qe();return ge=class extends t{constructor(t){super({...t,multiple:!0})}},ge}())),i("Numeral",(()=>Ee?ve:(Ee=1,ve=Qe()))),i("Password",(()=>function(){if(xe)return Oe;xe=1;const t=Ke();return Oe=class extends t{constructor(t){super(t),this.cursorShow()}format(t=this.input){return this.keypressed?(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(t.length)):""}},Oe}())),i("Scale",(()=>function(){if(Ce)return _e;Ce=1;const t=mt,e=Ue(),i=ht;return _e=class extends e{constructor(t={}){super(t),this.widths=[].concat(t.messageWidth||50),this.align=[].concat(t.align||"left"),this.linebreak=t.linebreak||!1,this.edgeLength=t.edgeLength||3,this.newline=t.newline||"\n   ";let e=t.startNumber||1;"number"==typeof this.scale&&(this.scaleKey=!1,this.scale=Array(this.scale).fill(0).map(((t,i)=>({name:i+e}))))}async reset(){return this.tableized=!1,await super.reset(),this.render()}tableize(){if(!0===this.tableized)return;this.tableized=!0;let t=0;for(let e of this.choices){t=Math.max(t,e.message.length),e.scaleIndex=e.initial||2,e.scale=[];for(let t=0;t<this.scale.length;t++)e.scale.push({index:t})}this.widths[0]=Math.min(this.widths[0],t+3)}async dispatch(t,e){if(this.multiple)return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e);this.alert()}heading(t,e,i){return this.styles.strong(t)}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;return t.scaleIndex>=this.scale.length-1?this.alert():(t.scaleIndex++,this.render())}left(){let t=this.focused;return t.scaleIndex<=0?this.alert():(t.scaleIndex--,this.render())}indent(){return""}format(){return this.state.submitted?this.choices.map((t=>this.styles.info(t.index))).join(", "):""}pointer(){return""}renderScaleKey(){return!1===this.scaleKey||this.state.submitted?"":["",...this.scale.map((t=>`   ${t.name} - ${t.message}`))].map((t=>this.styles.muted(t))).join("\n")}renderScaleHeading(t){let e=this.scale.map((t=>t.name));"function"==typeof this.options.renderScaleHeading&&(e=this.options.renderScaleHeading.call(this,t));let i=this.scaleLength-e.join("").length,s=Math.round(i/(e.length-1)),r=e.map((t=>this.styles.strong(t))).join(" ".repeat(s)),n=" ".repeat(this.widths[0]);return this.margin[3]+n+this.margin[1]+r}scaleIndicator(t,e,i){if("function"==typeof this.options.scaleIndicator)return this.options.scaleIndicator.call(this,t,e,i);let s=t.scaleIndex===e.index;return e.disabled?this.styles.hint(this.symbols.radio.disabled):s?this.styles.success(this.symbols.radio.on):this.symbols.radio.off}renderScale(t,e){let i=t.scale.map((i=>this.scaleIndicator(t,i,e))),s="Hyper"===this.term?"":" ";return i.join(s+this.symbols.line.repeat(this.edgeLength))}async renderChoice(e,s){await this.onChoice(e,s);let r=this.index===s,n=await this.pointer(e,s),o=await e.hint;o&&!i.hasColor(o)&&(o=this.styles.muted(o));let a=t=>this.margin[3]+t.replace(/\s+$/,"").padEnd(this.widths[0]," "),l=this.newline,h=this.indent(e),c=await this.resolve(e.message,this.state,e,s),u=await this.renderScale(e,s),p=this.margin[1]+this.margin[3];this.scaleLength=t.unstyle(u).length,this.widths[0]=Math.min(this.widths[0],this.width-this.scaleLength-p.length);let d=i.wordWrap(c,{width:this.widths[0],newline:l}).split("\n").map((t=>a(t)+this.margin[1]));return r&&(u=this.styles.info(u),d=d.map((t=>this.styles.info(t)))),d[0]+=u,this.linebreak&&d.push(""),[h+n,d.join("\n")].filter(Boolean)}async renderChoices(){if(this.state.submitted)return"";this.tableize();let t=this.visible.map((async(t,e)=>await this.renderChoice(t,e))),e=await Promise.all(t),i=await this.renderScaleHeading();return this.margin[0]+[i,...e.map((t=>t.join(" ")))].join("\n")}async render(){let{submitted:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=await this.message(),n="";!1!==this.options.promptLine&&(n=[i,r,s,""].join(" "),this.state.prompt=n);let o=await this.header(),a=await this.format(),l=await this.renderScaleKey(),h=await this.error()||await this.hint(),c=await this.renderChoices(),u=await this.footer(),p=this.emptyError;a&&(n+=a),h&&!n.includes(h)&&(n+=" "+h),t&&!a&&!c.trim()&&this.multiple&&null!=p&&(n+=this.styles.danger(p)),this.clear(e),this.write([o,n,l,c,u].filter(Boolean).join("\n")),this.state.submitted||this.write(this.margin[2]),this.restore()}submit(){this.value={};for(let t of this.choices)this.value[t.name]=t.scaleIndex;return this.base.submit.call(this)}},_e}())),i("Select",(()=>qe())),i("Snippet",(()=>function(){if($e)return Ie;$e=1;const t=mt,e=ti(),i=Dt();return Ie=class extends i{constructor(t){super(t),this.cursorHide(),this.reset(!0)}async initialize(){this.interpolate=await e(this),await super.initialize()}async reset(t){this.state.keys=[],this.state.invalid=new Map,this.state.missing=new Set,this.state.completed=0,this.state.values={},!0!==t&&(await this.initialize(),await this.render())}moveCursor(t){let e=this.getItem();this.cursor+=t,e.cursor+=t}dispatch(t,e){e.code||e.ctrl||null==t||!this.getItem()?this.alert():this.append(t,e)}append(t,e){let i=this.getItem(),s=i.input.slice(0,this.cursor),r=i.input.slice(this.cursor);this.input=i.input=`${s}${t}${r}`,this.moveCursor(1),this.render()}delete(){let t=this.getItem();if(this.cursor<=0||!t.input)return this.alert();let e=t.input.slice(this.cursor),i=t.input.slice(0,this.cursor-1);this.input=t.input=`${i}${e}`,this.moveCursor(-1),this.render()}increment(t){return t>=this.state.keys.length-1?0:t+1}decrement(t){return t<=0?this.state.keys.length-1:t-1}first(){this.state.index=0,this.render()}last(){this.state.index=this.state.keys.length-1,this.render()}right(){if(this.cursor>=this.input.length)return this.alert();this.moveCursor(1),this.render()}left(){if(this.cursor<=0)return this.alert();this.moveCursor(-1),this.render()}prev(){this.state.index=this.decrement(this.state.index),this.getItem(),this.render()}next(){this.state.index=this.increment(this.state.index),this.getItem(),this.render()}up(){this.prev()}down(){this.next()}format(t){let e=this.state.completed<100?this.styles.warning:this.styles.success;return!0===this.state.submitted&&100!==this.state.completed&&(e=this.styles.danger),e(`${this.state.completed}% completed`)}async render(){let{index:t,keys:e=[],submitted:i,size:s}=this.state,r=[this.options.newline,"\n"].find((t=>null!=t)),n=await this.prefix(),o=await this.separator(),a=[n,await this.message(),o].filter(Boolean).join(" ");this.state.prompt=a;let l=await this.header(),h=await this.error()||"",c=await this.hint()||"",u=i?"":await this.interpolate(this.state),p=this.state.key=e[t]||"",d=await this.format(p),m=await this.footer();d&&(a+=" "+d),c&&!d&&0===this.state.completed&&(a+=" "+c),this.clear(s);let f=[l,a,u,m,h.trim()];this.write(f.filter(Boolean).join(r)),this.restore()}getItem(t){let{items:e,keys:i,index:s}=this.state,r=e.find((t=>t.name===i[s]));return r&&null!=r.input&&(this.input=r.input,this.cursor=r.cursor),r}async submit(){"function"!=typeof this.interpolate&&await this.initialize(),await this.interpolate(this.state,!0);let{invalid:e,missing:i,output:s,values:r}=this.state;if(e.size){let t="";for(let[i,s]of e)t+=`Invalid ${i}: ${s}\n`;return this.state.error=t,super.submit()}if(i.size)return this.state.error="Required: "+[...i.keys()].join(", "),super.submit();let n=t.unstyle(s).split("\n").map((t=>t.slice(1))).join("\n");return this.value={values:r,result:n},super.submit()}},Ie}())),i("Sort",(()=>function(){if(Re)return Te;Re=1;const t="(Use <shift>+<up/down> to sort)",e=qe();return Te=class extends e{constructor(e){super({...e,reorder:!1,sort:!0,multiple:!0}),this.state.hint=[this.options.hint,t].find(this.isValue.bind(this))}indicator(){return""}async renderChoice(t,e){let i=await super.renderChoice(t,e),s=this.symbols.identicalTo+" ",r=this.index===e&&this.sorting?this.styles.muted(s):"  ";return!1===this.options.drag&&(r=""),!0===this.options.numbered?r+`${e+1} - `+i:r+i}get selected(){return this.choices}submit(){return this.value=this.choices.map((t=>t.value)),super.submit()}},Te}())),i("Survey",(()=>ei())),i("Text",(()=>Le?Ne:(Le=1,Ne=Je()))),i("Toggle",(()=>function(){if(De)return je;De=1;const t=Ye();return je=class extends t{async initialize(){await super.initialize(),this.value=this.initial=!!this.options.initial,this.disabled=this.options.disabled||"no",this.enabled=this.options.enabled||"yes",await this.render()}reset(){this.value=this.initial,this.render()}delete(){this.alert()}toggle(){this.value=!this.value,this.render()}enable(){if(!0===this.value)return this.alert();this.value=!0,this.render()}disable(){if(!1===this.value)return this.alert();this.value=!1,this.render()}up(){this.toggle()}down(){this.toggle()}right(){this.toggle()}left(){this.toggle()}next(){this.toggle()}prev(){this.toggle()}dispatch(t="",e){switch(t.toLowerCase()){case" ":return this.toggle();case"1":case"y":case"t":return this.enable();case"0":case"n":case"f":return this.disable();default:return this.alert()}}format(){let t=t=>this.styles.primary.underline(t);return[this.value?this.disabled:t(this.disabled),this.value?t(this.enabled):this.enabled].join(this.styles.muted(" / "))}async render(){let{size:t}=this.state,e=await this.header(),i=await this.prefix(),s=await this.separator(),r=await this.message(),n=await this.format(),o=await this.error()||await this.hint(),a=await this.footer(),l=[i,r,s,n].join(" ");this.state.prompt=l,o&&!l.includes(o)&&(l+=" "+o),this.clear(t),this.write([e,l,a].filter(Boolean).join("\n")),this.write(this.margin[2]),this.restore()}},je}())),i("Quiz",(()=>function(){if(Ge)return Me;Ge=1;const t=qe();return Me=class extends t{constructor(t){if(super(t),"number"!=typeof this.options.correctChoice||this.options.correctChoice<0)throw new Error("Please specify the index of the correct answer from the list of choices")}async toChoices(t,e){let i=await super.toChoices(t,e);if(i.length<2)throw new Error("Please give at least two choices to the user");if(this.options.correctChoice>i.length)throw new Error("Please specify the index of the correct answer from the list of choices");return i}check(t){return t.index===this.options.correctChoice}async result(t){return{selectedAnswer:t,correctAnswer:this.options.choices[this.options.correctChoice].value,correct:await this.check(this.state)}}},Me}()))}(Ve)),Ve}const si=a,ri=i,ni=ht;class oi extends ri{constructor(t,e){super(),this.options=ni.merge({},t),this.answers={...e}}register(t,e){if(ni.isObject(t)){for(let e of Object.keys(t))this.register(e,t[e]);return this}si.equal(typeof e,"function","expected a function");let i=t.toLowerCase();return e.prototype instanceof this.Prompt?this.prompts[i]=e:this.prompts[i]=e(this.Prompt,this),this}async prompt(t=[]){for(let e of[].concat(t))try{"function"==typeof e&&(e=await e.call(this)),await this.ask(ni.merge({},this.options,e))}catch(t){return Promise.reject(t)}return this.answers}async ask(t){"function"==typeof t&&(t=await t.call(this));let e=ni.merge({},this.options,t),{type:i,name:s}=t,{set:r,get:n}=ni;if("function"==typeof i&&(i=await i.call(this,t,this.answers)),!i)return this.answers[s];si(this.prompts[i],`Prompt "${i}" is not registered`);let o=new this.prompts[i](e),a=n(this.answers,s);o.state.answers=this.answers,o.enquirer=this,s&&o.on("submit",(t=>{this.emit("answer",s,t,o),r(this.answers,s,t)}));let l=o.emit.bind(o);return o.emit=(...t)=>(this.emit.call(this,...t),l(...t)),this.emit("prompt",o,this),e.autofill&&null!=a?(o.value=o.input=a,"show"===e.autofill&&await o.submit()):a=o.value=await o.run(),a}use(t){return t.call(this,this),this}set Prompt(t){this._Prompt=t}get Prompt(){return this._Prompt||this.constructor.Prompt}get prompts(){return this.constructor.prompts}static set Prompt(t){this._Prompt=t}static get Prompt(){return this._Prompt||Dt()}static get prompts(){return ii()}static get types(){return He?Be:(He=1,Be={ArrayPrompt:Ue(),AuthPrompt:Xe(),BooleanPrompt:Ye(),NumberPrompt:Qe(),StringPrompt:Ke()})}static get prompt(){const t=(e,...i)=>{let s=new this(...i),r=s.emit.bind(s);return s.emit=(...e)=>(t.emit(...e),r(...e)),s.prompt(e)};return ni.mixinEmitter(t,new ri),t}}ni.mixinEmitter(oi,new ri);const ai=oi.prompts;for(let t of Object.keys(ai)){let e=t.toLowerCase(),i=e=>new ai[t](e).run();oi.prompt[e]=i,oi[e]=i,oi[t]||Reflect.defineProperty(oi,t,{get:()=>ai[t]})}const li=t=>{ni.defineExport(oi,t,(()=>oi.types[t]))};li("ArrayPrompt"),li("AuthPrompt"),li("BooleanPrompt"),li("NumberPrompt"),li("StringPrompt");var hi,ci,ui,pi,di,mi=oi,fi={exports:{}};di="win32"===process.platform||w.TESTING_WINDOWS?function(){if(ci)return hi;ci=1,hi=i,i.sync=function(i,s){return e(t.statSync(i),i,s)};var t=n;function e(t,e,i){return!(!t.isSymbolicLink()&&!t.isFile())&&function(t,e){var i=void 0!==e.pathExt?e.pathExt:process.env.PATHEXT;if(!i)return!0;if(-1!==(i=i.split(";")).indexOf(""))return!0;for(var s=0;s<i.length;s++){var r=i[s].toLowerCase();if(r&&t.substr(-r.length).toLowerCase()===r)return!0}return!1}(e,i)}function i(i,s,r){t.stat(i,(function(t,n){r(t,!t&&e(n,i,s))}))}return hi}():function(){if(pi)return ui;pi=1,ui=e,e.sync=function(e,s){return i(t.statSync(e),s)};var t=n;function e(e,s,r){t.stat(e,(function(t,e){r(t,!t&&i(e,s))}))}function i(t,e){return t.isFile()&&function(t,e){var i=t.mode,s=t.uid,r=t.gid,n=void 0!==e.uid?e.uid:process.getuid&&process.getuid(),o=void 0!==e.gid?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),l=parseInt("010",8);return i&parseInt("001",8)||i&l&&r===o||i&a&&s===n||i&(a|l)&&0===n}(t,e)}return ui}();var gi=bi;function bi(t,e,i){if("function"==typeof e&&(i=e,e={}),!i){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(i,s){bi(t,e||{},(function(t,e){t?s(t):i(e)}))}))}di(t,e||{},(function(t,s){t&&("EACCES"===t.code||e&&e.ignoreErrors)&&(t=null,s=!1),i(t,s)}))}bi.sync=function(t,e){try{return di.sync(t,e||{})}catch(t){if(e&&e.ignoreErrors||"EACCES"===t.code)return!1;throw t}};const yi="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,wi=r,vi=yi?";":":",Ei=gi,Oi=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),xi=(t,e)=>{const i=e.colon||vi,s=t.match(/\//)||yi&&t.match(/\\/)?[""]:[...yi?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(i)],r=yi?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",n=yi?r.split(i):[""];return yi&&-1!==t.indexOf(".")&&""!==n[0]&&n.unshift(""),{pathEnv:s,pathExt:n,pathExtExe:r}},_i=(t,e,i)=>{"function"==typeof e&&(i=e,e={}),e||(e={});const{pathEnv:s,pathExt:r,pathExtExe:n}=xi(t,e),o=[],a=i=>new Promise(((r,n)=>{if(i===s.length)return e.all&&o.length?r(o):n(Oi(t));const a=s[i],h=/^".*"$/.test(a)?a.slice(1,-1):a,c=wi.join(h,t),u=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+c:c;r(l(u,i,0))})),l=(t,i,s)=>new Promise(((h,c)=>{if(s===r.length)return h(a(i+1));const u=r[s];Ei(t+u,{pathExt:n},((r,n)=>{if(!r&&n){if(!e.all)return h(t+u);o.push(t+u)}return h(l(t,i,s+1))}))}));return i?a(0).then((t=>i(null,t)),i):a(0)};var Ci=_i;_i.sync=(t,e)=>{e=e||{};const{pathEnv:i,pathExt:s,pathExtExe:r}=xi(t,e),n=[];for(let o=0;o<i.length;o++){const a=i[o],l=/^".*"$/.test(a)?a.slice(1,-1):a,h=wi.join(l,t),c=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+h:h;for(let t=0;t<s.length;t++){const i=c+s[t];try{if(Ei.sync(i,{pathExt:r})){if(!e.all)return i;n.push(i)}}catch(t){}}}if(e.all&&n.length)return n;if(e.nothrow)return null;throw Oi(t)};var Ai={exports:{}};const Si=(t={})=>{const e=t.env||process.env;return"win32"!==(t.platform||process.platform)?"PATH":Object.keys(e).reverse().find((t=>"PATH"===t.toUpperCase()))||"Path"};Ai.exports=Si,Ai.exports.default=Si;var Ii=Ai.exports;const $i=r,Ti=Ci,Ri=Ii;function ki(t,e){const i=t.options.env||process.env,s=process.cwd(),r=null!=t.options.cwd,n=r&&void 0!==process.chdir&&!process.chdir.disabled;if(n)try{process.chdir(t.options.cwd)}catch(t){}let o;try{o=Ti.sync(t.command,{path:i[Ri({env:i})],pathExt:e?$i.delimiter:void 0})}catch(t){}finally{n&&process.chdir(s)}return o&&(o=$i.resolve(r?t.options.cwd:"",o)),o}var Pi=function(t){return ki(t)||ki(t,!0)},Ni={};const Li=/([()\][%!^"`<>&|;, *?])/g;Ni.command=function(t){return t=t.replace(Li,"^$1")},Ni.argument=function(t,e){return t=(t=`"${t=(t=(t=`${t}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(Li,"^$1"),e&&(t=t.replace(Li,"^$1")),t};const ji=/^#!(.*)/;const Di=n,Mi=(t="")=>{const e=t.match(ji);if(!e)return null;const[i,s]=e[0].replace(/#! ?/,"").split(" "),r=i.split("/").pop();return"env"===r?s:s?`${r} ${s}`:r};var Gi=function(t){const e=Buffer.alloc(150);let i;try{i=Di.openSync(t,"r"),Di.readSync(i,e,0,150,0),Di.closeSync(i)}catch(t){}return Mi(e.toString())};const Fi=r,Bi=Pi,Hi=Ni,Vi=Gi,Ui="win32"===process.platform,qi=/\.(?:com|exe)$/i,Wi=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function zi(t){if(!Ui)return t;const e=function(t){t.file=Bi(t);const e=t.file&&Vi(t.file);return e?(t.args.unshift(t.file),t.command=e,Bi(t)):t.file}(t),i=!qi.test(e);if(t.options.forceShell||i){const i=Wi.test(e);t.command=Fi.normalize(t.command),t.command=Hi.command(t.command),t.args=t.args.map((t=>Hi.argument(t,i)));const s=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${s}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}var Xi=function(t,e,i){e&&!Array.isArray(e)&&(i=e,e=null);const s={command:t,args:e=e?e.slice(0):[],options:i=Object.assign({},i),file:void 0,original:{command:t,args:e}};return i.shell?s:zi(s)};const Yi="win32"===process.platform;function Ki(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function Zi(t,e){return Yi&&1===t&&!e.file?Ki(e.original,"spawn"):null}var Ji={hookChildProcess:function(t,e){if(!Yi)return;const i=t.emit;t.emit=function(s,r){if("exit"===s){const s=Zi(r,e);if(s)return i.call(t,"error",s)}return i.apply(t,arguments)}},verifyENOENT:Zi,verifyENOENTSync:function(t,e){return Yi&&1===t&&!e.file?Ki(e.original,"spawnSync"):null},notFoundError:Ki};const Qi=s,ts=Xi,es=Ji;function is(t,e,i){const s=ts(t,e,i),r=Qi.spawn(s.command,s.args,s.options);return es.hookChildProcess(r,s),r}fi.exports=is,fi.exports.spawn=is,fi.exports.sync=function(t,e,i){const s=ts(t,e,i),r=Qi.spawnSync(s.command,s.args,s.options);return r.error=r.error||es.verifyENOENTSync(r.status,s),r},fi.exports._parse=ts,fi.exports._enoent=es;var ss=v(fi.exports);function rs(t={}){const{env:e=process.env,platform:i=process.platform}=t;return"win32"!==i?"PATH":Object.keys(e).reverse().find((t=>"PATH"===t.toUpperCase()))||"Path"}function ns({env:t=u.env,...i}={}){const s=rs({env:t={...t}});return i.path=t[s],t[s]=function(t={}){const{cwd:i=u.cwd(),path:s=u.env[rs()],execPath:r=u.execPath}=t;let n;const o=i instanceof URL?p.fileURLToPath(i):i;let a=e.resolve(o);const l=[];for(;n!==a;)l.push(e.join(a,"node_modules/.bin")),n=a,a=e.resolve(a,"..");return l.push(e.resolve(o,r,"..")),[...l,s].join(e.delimiter)}(i),t}const os=(t,e,i,s)=>{if("length"===i||"prototype"===i)return;if("arguments"===i||"caller"===i)return;const r=Object.getOwnPropertyDescriptor(t,i),n=Object.getOwnPropertyDescriptor(e,i);!as(r,n)&&s||Object.defineProperty(t,i,n)},as=function(t,e){return void 0===t||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},ls=(t,e)=>`/* Wrapped ${t}*/\n${e}`,hs=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),cs=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");function us(t,e,{ignoreNonConfigurable:i=!1}={}){const{name:s}=t;for(const s of Reflect.ownKeys(e))os(t,e,s,i);return((t,e)=>{const i=Object.getPrototypeOf(e);i!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,i)})(t,e),((t,e,i)=>{const s=""===i?"":`with ${i.trim()}() `,r=ls.bind(null,s,e.toString());Object.defineProperty(r,"name",cs),Object.defineProperty(t,"toString",{...hs,value:r})})(t,e,s),t}const ps=new WeakMap,ds=(t,e={})=>{if("function"!=typeof t)throw new TypeError("Expected a function");let i,s=0;const r=t.displayName||t.name||"<anonymous>",n=function(...o){if(ps.set(n,++s),1===s)i=t.apply(this,o),t=null;else if(!0===e.throw)throw new Error(`Function \`${r}\` can only be called once`);return i};return us(n,t),ps.set(n,s),n};ds.callCount=t=>{if(!ps.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return ps.get(t)};const ms=(t,e)=>({name:`SIGRT${e+1}`,number:fs+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),fs=34,gs=64,bs=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}],ys=()=>{const t=(()=>{const t=gs-fs+1;return Array.from({length:t},ms)})();return[...bs,...t].map(ws)},ws=({name:t,number:e,description:i,action:s,forced:r=!1,standard:n})=>{const{signals:{[t]:o}}=d.constants,a=void 0!==o;return{name:t,number:a?o:e,description:i,supported:a,action:s,forced:r,standard:n}},vs=({name:t,number:e,description:i,supported:s,action:r,forced:n,standard:o})=>[t,{name:t,number:e,description:i,supported:s,action:r,forced:n,standard:o}],Es=(()=>{const t=ys();return Object.fromEntries(t.map(vs))})(),Os=(t,e)=>{const i=xs(t,e);if(void 0===i)return{};const{name:s,description:r,supported:n,action:o,forced:a,standard:l}=i;return{[t]:{name:s,number:t,description:r,supported:n,action:o,forced:a,standard:l}}},xs=(t,e)=>{const i=e.find((({name:e})=>d.constants.signals[e]===t));return void 0!==i?i:e.find((e=>e.number===t))};(()=>{const t=ys(),e=gs+1,i=Array.from({length:e},((e,i)=>Os(i,t)));Object.assign({},...i)})();const _s=({stdout:t,stderr:e,all:i,error:s,signal:r,exitCode:n,command:o,escapedCommand:a,timedOut:l,isCanceled:h,killed:c,parsed:{options:{timeout:u}}})=>{n=null===n?void 0:n;const p=void 0===(r=null===r?void 0:r)?void 0:Es[r].description,d=(({timedOut:t,timeout:e,errorCode:i,signal:s,signalDescription:r,exitCode:n,isCanceled:o})=>t?`timed out after ${e} milliseconds`:o?"was canceled":void 0!==i?`failed with ${i}`:void 0!==s?`was killed with ${s} (${r})`:void 0!==n?`failed with exit code ${n}`:"failed")({timedOut:l,timeout:u,errorCode:s&&s.code,signal:r,signalDescription:p,exitCode:n,isCanceled:h}),m=`Command ${d}: ${o}`,f="[object Error]"===Object.prototype.toString.call(s),g=f?`${m}\n${s.message}`:m,b=[g,e,t].filter(Boolean).join("\n");return f?(s.originalMessage=s.message,s.message=b):s=new Error(b),s.shortMessage=g,s.command=o,s.escapedCommand=a,s.exitCode=n,s.signal=r,s.signalDescription=p,s.stdout=t,s.stderr=e,void 0!==i&&(s.all=i),"bufferedData"in s&&delete s.bufferedData,s.failed=!0,s.timedOut=Boolean(l),s.isCanceled=h,s.killed=c&&!l,s},Cs=["stdin","stdout","stderr"],As=t=>{if(!t)return;const{stdio:e}=t;if(void 0===e)return Cs.map((e=>t[e]));if((t=>Cs.some((e=>void 0!==t[e])))(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Cs.map((t=>`\`${t}\``)).join(", ")}`);if("string"==typeof e)return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);const i=Math.max(e.length,Cs.length);return Array.from({length:i},((t,i)=>e[i]))};var Ss,Is={exports:{}},$s={exports:{}};var Ts=w.process;const Rs=function(t){return t&&"object"==typeof t&&"function"==typeof t.removeListener&&"function"==typeof t.emit&&"function"==typeof t.reallyExit&&"function"==typeof t.listeners&&"function"==typeof t.kill&&"number"==typeof t.pid&&"function"==typeof t.on};if(Rs(Ts)){var ks,Ps=a,Ns=(Ss||(Ss=1,(Ws=$s).exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&Ws.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&Ws.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")),$s.exports),Ls=/^win/i.test(Ts.platform),js=i;"function"!=typeof js&&(js=js.EventEmitter),Ts.__signal_exit_emitter__?ks=Ts.__signal_exit_emitter__:((ks=Ts.__signal_exit_emitter__=new js).count=0,ks.emitted={}),ks.infinite||(ks.setMaxListeners(1/0),ks.infinite=!0),Is.exports=function(t,e){if(!Rs(w.process))return function(){};Ps.equal(typeof t,"function","a callback must be provided for exit handler"),!1===Fs&&Bs();var i="exit";e&&e.alwaysLast&&(i="afterexit");return ks.on(i,t),function(){ks.removeListener(i,t),0===ks.listeners("exit").length&&0===ks.listeners("afterexit").length&&Ds()}};var Ds=function(){Fs&&Rs(w.process)&&(Fs=!1,Ns.forEach((function(t){try{Ts.removeListener(t,Gs[t])}catch(t){}})),Ts.emit=Us,Ts.reallyExit=Hs,ks.count-=1)};Is.exports.unload=Ds;var Ms=function(t,e,i){ks.emitted[t]||(ks.emitted[t]=!0,ks.emit(t,e,i))},Gs={};Ns.forEach((function(t){Gs[t]=function(){Rs(w.process)&&(Ts.listeners(t).length===ks.count&&(Ds(),Ms("exit",null,t),Ms("afterexit",null,t),Ls&&"SIGHUP"===t&&(t="SIGINT"),Ts.kill(Ts.pid,t)))}})),Is.exports.signals=function(){return Ns};var Fs=!1,Bs=function(){!Fs&&Rs(w.process)&&(Fs=!0,ks.count+=1,Ns=Ns.filter((function(t){try{return Ts.on(t,Gs[t]),!0}catch(t){return!1}})),Ts.emit=qs,Ts.reallyExit=Vs)};Is.exports.load=Bs;var Hs=Ts.reallyExit,Vs=function(t){Rs(w.process)&&(Ts.exitCode=t||0,Ms("exit",Ts.exitCode,null),Ms("afterexit",Ts.exitCode,null),Hs.call(Ts,Ts.exitCode))},Us=Ts.emit,qs=function(t,e){if("exit"===t&&Rs(w.process)){void 0!==e&&(Ts.exitCode=e);var i=Us.apply(this,arguments);return Ms("exit",Ts.exitCode,null),Ms("afterexit",Ts.exitCode,null),i}return Us.apply(this,arguments)}}else Is.exports=function(){return function(){}};var Ws,zs=v(Is.exports);const Xs=(t,e="SIGTERM",i={})=>{const s=t(e);return Ys(t,e,i,s),s},Ys=(t,e,i,s)=>{if(!Ks(e,i,s))return;const r=Js(i),n=setTimeout((()=>{t("SIGKILL")}),r);n.unref&&n.unref()},Ks=(t,{forceKillAfterTimeout:e},i)=>Zs(t)&&!1!==e&&i,Zs=t=>t===d.constants.signals.SIGTERM||"string"==typeof t&&"SIGTERM"===t.toUpperCase(),Js=({forceKillAfterTimeout:t=!0})=>{if(!0===t)return 5e3;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},Qs=(t,e)=>{t.kill()&&(e.isCanceled=!0)},tr=(t,{timeout:e,killSignal:i="SIGTERM"},s)=>{if(0===e||void 0===e)return s;let r;const n=new Promise(((s,n)=>{r=setTimeout((()=>{((t,e,i)=>{t.kill(e),i(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))})(t,i,n)}),e)})),o=s.finally((()=>{clearTimeout(r)}));return Promise.race([n,o])};function er(t){return null!==t&&"object"==typeof t&&"function"==typeof t.pipe}function ir(t){return er(t)&&!1!==t.writable&&"function"==typeof t._write&&"object"==typeof t._writableState}const sr=(e,i,s)=>{if("string"==typeof s)return e[i].pipe(t.createWriteStream(s)),e;if(ir(s))return e[i].pipe(s),e;if(!(t=>t instanceof c.ChildProcess&&"function"==typeof t.then)(s))throw new TypeError("The second argument must be a string, a stream or an Execa child process.");if(!ir(s.stdin))throw new TypeError("The target child process's stdin must be available.");return e[i].pipe(s.stdin),s};var rr={exports:{}};const{PassThrough:nr}=f;const{constants:or}=m,ar=f,{promisify:lr}=g,hr=t=>{t={...t};const{array:e}=t;let{encoding:i}=t;const s="buffer"===i;let r=!1;e?r=!(i||s):i=i||"utf8",s&&(i=null);const n=new nr({objectMode:r});i&&n.setEncoding(i);let o=0;const a=[];return n.on("data",(t=>{a.push(t),r?o=a.length:o+=t.length})),n.getBufferedValue=()=>e?a:s?Buffer.concat(a,o):a.join(""),n.getBufferedLength=()=>o,n},cr=lr(ar.pipeline);class ur extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function pr(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};const{maxBuffer:i}=e,s=hr(e);return await new Promise(((e,r)=>{const n=t=>{t&&s.getBufferedLength()<=or.MAX_LENGTH&&(t.bufferedData=s.getBufferedValue()),r(t)};(async()=>{try{await cr(t,s),e()}catch(t){n(t)}})(),s.on("data",(()=>{s.getBufferedLength()>i&&n(new ur)}))})),s.getBufferedValue()}rr.exports=pr,rr.exports.buffer=(t,e)=>pr(t,{...e,encoding:"buffer"}),rr.exports.array=(t,e)=>pr(t,{...e,array:!0}),rr.exports.MaxBufferError=ur;var dr=v(rr.exports);const{PassThrough:mr}=f;var fr=function(){var t=[],e=new mr({objectMode:!0});return e.setMaxListeners(0),e.add=i,e.isEmpty=function(){return 0==t.length},e.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(i),e;function i(r){return Array.isArray(r)?(r.forEach(i),this):(t.push(r),r.once("end",s.bind(null,r)),r.once("error",e.emit.bind(e,"error")),r.pipe(e,{end:!1}),this)}function s(i){!(t=t.filter((function(t){return t!==i}))).length&&e.readable&&e.end()}},gr=v(fr);const br=({input:e,inputFile:i})=>"string"!=typeof i?e:((t=>{if(void 0!==t)throw new TypeError("The `input` and `inputFile` options cannot be both set.")})(e),t.createReadStream(i)),yr=async(t,e)=>{if(t&&void 0!==e){t.destroy();try{return await e}catch(t){return t.bufferedData}}},wr=(t,{encoding:e,buffer:i,maxBuffer:s})=>{if(t&&i)return e?dr(t,{encoding:e,maxBuffer:s}):dr.buffer(t,{maxBuffer:s})},vr=(async()=>{})().constructor.prototype,Er=["then","catch","finally"].map((t=>[t,Reflect.getOwnPropertyDescriptor(vr,t)])),Or=(t,e)=>{for(const[i,s]of Er){const r="function"==typeof e?(...t)=>Reflect.apply(s.value,e(),t):s.value.bind(e);Reflect.defineProperty(t,i,{...s,value:r})}},xr=(t,e=[])=>Array.isArray(e)?[t,...e]:[t],_r=/^[\w.-]+$/,Cr=/"/g,Ar=(t,e)=>xr(t,e).map((t=>(t=>"string"!=typeof t||_r.test(t)?t:`"${t.replace(Cr,'\\"')}"`)(t))).join(" "),Sr=b.debuglog("execa").enabled,Ir=(t,e)=>String(t).padStart(e,"0"),$r=(t,{verbose:e})=>{e&&u.stderr.write(`[${(()=>{const t=new Date;return`${Ir(t.getHours(),2)}:${Ir(t.getMinutes(),2)}:${Ir(t.getSeconds(),2)}.${Ir(t.getMilliseconds(),3)}`})()}] ${t}\n`)},Tr=(t,i,s={})=>{const r=ss._parse(t,i,s);return t=r.command,i=r.args,(s={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(s=r.options).cwd||u.cwd(),execPath:u.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,verbose:Sr,...s}).env=(({env:t,extendEnv:e,preferLocal:i,localDir:s,execPath:r})=>{const n=e?{...u.env,...t}:t;return i?ns({env:n,cwd:s,execPath:r}):n})(s),s.stdio=As(s),"win32"===u.platform&&"cmd"===e.basename(t,".exe")&&i.unshift("/q"),{file:t,args:i,options:s,parsed:r}},Rr=(t,e,i)=>"string"==typeof e||h.Buffer.isBuffer(e)?t.stripFinalNewline?function(t){const e="string"==typeof t?"\n":"\n".charCodeAt(),i="string"==typeof t?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,-1)),t[t.length-1]===i&&(t=t.slice(0,-1)),t}(e):e:void 0===i?void 0:"";function kr(t,e,i){const s=Tr(t,e,i),r=((t,e)=>xr(t,e).join(" "))(t,e),n=Ar(t,e);let o;$r(n,s.options),(({timeout:t})=>{if(void 0!==t&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)})(s.options);try{o=c.spawn(s.file,s.args,s.options)}catch(t){const e=new c.ChildProcess,i=Promise.reject(_s({error:t,stdout:"",stderr:"",all:"",command:r,escapedCommand:n,parsed:s,timedOut:!1,isCanceled:!1,killed:!1}));return Or(e,i),e}const a=(t=>new Promise(((e,i)=>{t.on("exit",((t,i)=>{e({exitCode:t,signal:i})})),t.on("error",(t=>{i(t)})),t.stdin&&t.stdin.on("error",(t=>{i(t)}))})))(o),l=tr(o,s.options,a),h=(async(t,{cleanup:e,detached:i},s)=>{if(!e||i)return s;const r=zs((()=>{t.kill()}));return s.finally((()=>{r()}))})(o,s.options,l);o.kill=Xs.bind(null,o.kill.bind(o)),o.cancel=Qs.bind(null,o,{isCanceled:!1});const u=ds((async()=>{const[{error:t,exitCode:e,signal:i,timedOut:a},l,c,u]=await(async({stdout:t,stderr:e,all:i},{encoding:s,buffer:r,maxBuffer:n},o)=>{const a=wr(t,{encoding:s,buffer:r,maxBuffer:n}),l=wr(e,{encoding:s,buffer:r,maxBuffer:n}),h=wr(i,{encoding:s,buffer:r,maxBuffer:2*n});try{return await Promise.all([o,a,l,h])}catch(s){return Promise.all([{error:s,signal:s.signal,timedOut:s.timedOut},yr(t,a),yr(e,l),yr(i,h)])}})(o,s.options,h),p=Rr(s.options,l),d=Rr(s.options,c),m=Rr(s.options,u);if(t||0!==e||null!==i){const l=_s({error:t,exitCode:e,signal:i,stdout:p,stderr:d,all:m,command:r,escapedCommand:n,parsed:s,timedOut:a,isCanceled:!!s.options.signal&&s.options.signal.aborted,killed:o.killed});if(!s.options.reject)return l;throw l}return{command:r,escapedCommand:n,exitCode:0,stdout:p,stderr:d,all:m,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}));return((t,e)=>{const i=br(e);void 0!==i&&(er(i)?i.pipe(t.stdin):t.stdin.end(i))})(o,s.options),o.all=((t,{all:e})=>{if(!e||!t.stdout&&!t.stderr)return;const i=gr();return t.stdout&&i.add(t.stdout),t.stderr&&i.add(t.stderr),i})(o,s.options),(t=>{null!==t.stdout&&(t.pipeStdout=sr.bind(void 0,t,"stdout")),null!==t.stderr&&(t.pipeStderr=sr.bind(void 0,t,"stderr")),void 0!==t.all&&(t.pipeAll=sr.bind(void 0,t,"all"))})(o),Or(o,u),o}var Pr="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var Nr={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Lr={exports:{}};!function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:i}=Nr,s=Pr,r=(e=t.exports={}).re=[],n=e.src=[],o=e.t={};let a=0;const l=(t,e,i)=>{const l=a++;s(t,l,e),o[t]=l,n[l]=e,r[l]=new RegExp(e,i?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${n[o.NUMERICIDENTIFIER]})\\.(${n[o.NUMERICIDENTIFIER]})\\.(${n[o.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${n[o.NUMERICIDENTIFIERLOOSE]})\\.(${n[o.NUMERICIDENTIFIERLOOSE]})\\.(${n[o.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${n[o.NUMERICIDENTIFIER]}|${n[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${n[o.NUMERICIDENTIFIERLOOSE]}|${n[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${n[o.PRERELEASEIDENTIFIER]}(?:\\.${n[o.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${n[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${n[o.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${n[o.BUILDIDENTIFIER]}(?:\\.${n[o.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${n[o.MAINVERSION]}${n[o.PRERELEASE]}?${n[o.BUILD]}?`),l("FULL",`^${n[o.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${n[o.MAINVERSIONLOOSE]}${n[o.PRERELEASELOOSE]}?${n[o.BUILD]}?`),l("LOOSE",`^${n[o.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${n[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${n[o.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${n[o.XRANGEIDENTIFIER]})(?:\\.(${n[o.XRANGEIDENTIFIER]})(?:\\.(${n[o.XRANGEIDENTIFIER]})(?:${n[o.PRERELEASE]})?${n[o.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${n[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[o.XRANGEIDENTIFIERLOOSE]})(?:${n[o.PRERELEASELOOSE]})?${n[o.BUILD]}?)?)?`),l("XRANGE",`^${n[o.GTLT]}\\s*${n[o.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${n[o.GTLT]}\\s*${n[o.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?(?:$|[^\\d])`),l("COERCERTL",n[o.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${n[o.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",l("TILDE",`^${n[o.LONETILDE]}${n[o.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${n[o.LONETILDE]}${n[o.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${n[o.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",l("CARET",`^${n[o.LONECARET]}${n[o.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${n[o.LONECARET]}${n[o.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${n[o.GTLT]}\\s*(${n[o.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${n[o.GTLT]}\\s*(${n[o.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${n[o.GTLT]}\\s*(${n[o.LOOSEPLAIN]}|${n[o.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${n[o.XRANGEPLAIN]})\\s+-\\s+(${n[o.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${n[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${n[o.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Lr,Lr.exports);var jr=Lr.exports;const Dr=Object.freeze({loose:!0}),Mr=Object.freeze({});var Gr=t=>t?"object"!=typeof t?Dr:t:Mr;const Fr=/^[0-9]+$/,Br=(t,e)=>{const i=Fr.test(t),s=Fr.test(e);return i&&s&&(t=+t,e=+e),t===e?0:i&&!s?-1:s&&!i?1:t<e?-1:1};var Hr={compareIdentifiers:Br,rcompareIdentifiers:(t,e)=>Br(e,t)};const Vr=Pr,{MAX_LENGTH:Ur,MAX_SAFE_INTEGER:qr}=Nr,{re:Wr,t:zr}=jr,Xr=Gr,{compareIdentifiers:Yr}=Hr;var Kr=class t{constructor(e,i){if(i=Xr(i),e instanceof t){if(e.loose===!!i.loose&&e.includePrerelease===!!i.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${g.inspect(e)}`);if(e.length>Ur)throw new TypeError(`version is longer than ${Ur} characters`);Vr("SemVer",e,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;const s=e.trim().match(i.loose?Wr[zr.LOOSE]:Wr[zr.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>qr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>qr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>qr||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<qr)return e}return t})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Vr("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if("string"==typeof e&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Yr(this.major,e.major)||Yr(this.minor,e.minor)||Yr(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let i=0;do{const t=this.prerelease[i],s=e.prerelease[i];if(Vr("prerelease compare",i,t,s),void 0===t&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===t)return-1;if(t!==s)return Yr(t,s)}while(++i)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let i=0;do{const t=this.build[i],s=e.build[i];if(Vr("prerelease compare",i,t,s),void 0===t&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===t)return-1;if(t!==s)return Yr(t,s)}while(++i)}inc(t,e,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,i),this.inc("pre",e,i);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,i),this.inc("pre",e,i);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(i)?1:0;if(!e&&!1===i)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[t];else{let s=this.prerelease.length;for(;--s>=0;)"number"==typeof this.prerelease[s]&&(this.prerelease[s]++,s=-2);if(-1===s){if(e===this.prerelease.join(".")&&!1===i)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(e){let s=[e,t];!1===i&&(s=[e]),0===Yr(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};const Zr=Kr;var Jr=(t,e,i,s,r)=>{"string"==typeof i&&(r=s,s=i,i=void 0);try{return new Zr(t instanceof Zr?t.version:t,i).inc(e,s,r).version}catch(t){return null}},Qr=v(Jr);const tn=Kr;var en=(t,e,i=!1)=>{if(t instanceof tn)return t;try{return new tn(t,e)}catch(t){if(!i)return null;throw t}};const sn=en;var rn=(t,e)=>{const i=sn(t,e);return i&&i.prerelease.length?i.prerelease:null},nn=v(rn);const on=en;var an=(t,e)=>{const i=on(t,e);return i?i.version:null},ln=v(an),hn={};function cn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function un(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?cn(Object(i),!0).forEach((function(e){pn(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):cn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function pn(t,e,i){return e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(hn,"__esModule",{value:!0});var dn=u,mn=d,fn=y;const gn=(t=0)=>e=>`[${e+t}m`,bn=(t=0)=>e=>`[${38+t};5;${e}m`,yn=(t=0)=>(e,i,s)=>`[${38+t};2;${e};${i};${s}m`,wn={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},vn=Object.keys(wn.modifier),En=Object.keys(wn.color),On=Object.keys(wn.bgColor),xn=[...En,...On];const _n=function(){const t=new Map;for(const[e,i]of Object.entries(wn)){for(const[e,s]of Object.entries(i))wn[e]={open:`[${s[0]}m`,close:`[${s[1]}m`},i[e]=wn[e],t.set(s[0],s[1]);Object.defineProperty(wn,e,{value:i,enumerable:!1})}return Object.defineProperty(wn,"codes",{value:t,enumerable:!1}),wn.color.close="[39m",wn.bgColor.close="[49m",wn.color.ansi=gn(),wn.color.ansi256=bn(),wn.color.ansi16m=yn(),wn.bgColor.ansi=gn(10),wn.bgColor.ansi256=bn(10),wn.bgColor.ansi16m=yn(10),Object.defineProperties(wn,{rgbToAnsi256:{value:(t,e,i)=>t===e&&e===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value(t){const e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!e)return[0,0,0];let[i]=e;3===i.length&&(i=[...i].map((t=>t+t)).join(""));const s=Number.parseInt(i,16);return[s>>16&255,s>>8&255,255&s]},enumerable:!1},hexToAnsi256:{value:t=>wn.rgbToAnsi256(...wn.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return t-8+90;let e,i,s;if(t>=232)e=(10*(t-232)+8)/255,i=e,s=e;else{const r=(t-=16)%36;e=Math.floor(t/36)/5,i=Math.floor(r/6)/5,s=r%6/5}const r=2*Math.max(e,i,s);if(0===r)return 30;let n=30+(Math.round(s)<<2|Math.round(i)<<1|Math.round(e));return 2===r&&(n+=60),n},enumerable:!1},rgbToAnsi:{value:(t,e,i)=>wn.ansi256ToAnsi(wn.rgbToAnsi256(t,e,i)),enumerable:!1},hexToAnsi:{value:t=>wn.ansi256ToAnsi(wn.hexToAnsi256(t)),enumerable:!1}}),wn}();function Cn(t,e=(globalThis.Deno?globalThis.Deno.args:dn.argv)){const i=t.startsWith("-")?"":1===t.length?"-":"--",s=e.indexOf(i+t),r=e.indexOf("--");return-1!==s&&(-1===r||s<r)}const{env:An}=dn;let Sn;function In(t,{streamIsTTY:e,sniffFlags:i=!0}={}){const s=function(){if("FORCE_COLOR"in An)return"true"===An.FORCE_COLOR?1:"false"===An.FORCE_COLOR?0:0===An.FORCE_COLOR.length?1:Math.min(Number.parseInt(An.FORCE_COLOR,10),3)}();void 0!==s&&(Sn=s);const r=i?Sn:s;if(0===r)return 0;if(i){if(Cn("color=16m")||Cn("color=full")||Cn("color=truecolor"))return 3;if(Cn("color=256"))return 2}if("TF_BUILD"in An&&"AGENT_NAME"in An)return 1;if(t&&!e&&void 0===r)return 0;const n=r||0;if("dumb"===An.TERM)return n;if("win32"===dn.platform){const t=mn.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in An)return"GITHUB_ACTIONS"in An?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((t=>t in An))||"codeship"===An.CI_NAME?1:n;if("TEAMCITY_VERSION"in An)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(An.TEAMCITY_VERSION)?1:0;if("truecolor"===An.COLORTERM)return 3;if("xterm-kitty"===An.TERM)return 3;if("TERM_PROGRAM"in An){const t=Number.parseInt((An.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(An.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(An.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(An.TERM)||"COLORTERM"in An?1:n}function $n(t,e={}){return function(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}(In(t,un({streamIsTTY:t&&t.isTTY},e)))}Cn("no-color")||Cn("no-colors")||Cn("color=false")||Cn("color=never")?Sn=0:(Cn("color")||Cn("colors")||Cn("color=true")||Cn("color=always"))&&(Sn=1);const Tn={stdout:$n({isTTY:fn.isatty(1)}),stderr:$n({isTTY:fn.isatty(2)})};function Rn(t,e,i){let s=t.indexOf(e);if(-1===s)return t;const r=e.length;let n=0,o="";do{o+=t.slice(n,s)+e+i,n=s+r,s=t.indexOf(e,n)}while(-1!==s);return o+=t.slice(n),o}const{stdout:kn,stderr:Pn}=Tn,Nn=Symbol("GENERATOR"),Ln=Symbol("STYLER"),jn=Symbol("IS_EMPTY"),Dn=["ansi","ansi","ansi256","ansi16m"],Mn=Object.create(null);const Gn=t=>{const e=(...t)=>t.join(" ");return((t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const i=kn?kn.level:0;t.level=void 0===e.level?i:e.level})(e,t),Object.setPrototypeOf(e,Fn.prototype),e};function Fn(t){return Gn(t)}Object.setPrototypeOf(Fn.prototype,Function.prototype);for(const[t,e]of Object.entries(_n))Mn[t]={get(){const i=qn(this,Un(e.open,e.close,this[Ln]),this[jn]);return Object.defineProperty(this,t,{value:i}),i}};Mn.visible={get(){const t=qn(this,this[Ln],!0);return Object.defineProperty(this,"visible",{value:t}),t}};const Bn=(t,e,i,...s)=>"rgb"===t?"ansi16m"===e?_n[i].ansi16m(...s):"ansi256"===e?_n[i].ansi256(_n.rgbToAnsi256(...s)):_n[i].ansi(_n.rgbToAnsi(...s)):"hex"===t?Bn("rgb",e,i,..._n.hexToRgb(...s)):_n[i][t](...s),Hn=["rgb","hex","ansi256"];for(const t of Hn){Mn[t]={get(){const{level:e}=this;return function(...i){const s=Un(Bn(t,Dn[e],"color",...i),_n.color.close,this[Ln]);return qn(this,s,this[jn])}}};Mn["bg"+t[0].toUpperCase()+t.slice(1)]={get(){const{level:e}=this;return function(...i){const s=Un(Bn(t,Dn[e],"bgColor",...i),_n.bgColor.close,this[Ln]);return qn(this,s,this[jn])}}}}const Vn=Object.defineProperties((()=>{}),un(un({},Mn),{},{level:{enumerable:!0,get(){return this[Nn].level},set(t){this[Nn].level=t}}})),Un=(t,e,i)=>{let s,r;return void 0===i?(s=t,r=e):(s=i.openAll+t,r=e+i.closeAll),{open:t,close:e,openAll:s,closeAll:r,parent:i}},qn=(t,e,i)=>{const s=(...t)=>Wn(s,1===t.length?""+t[0]:t.join(" "));return Object.setPrototypeOf(s,Vn),s[Nn]=t,s[Ln]=e,s[jn]=i,s},Wn=(t,e)=>{if(t.level<=0||!e)return t[jn]?"":e;let i=t[Ln];if(void 0===i)return e;const{openAll:s,closeAll:r}=i;if(e.includes(""))for(;void 0!==i;)e=Rn(e,i.close,i.open),i=i.parent;const n=e.indexOf("\n");return-1!==n&&(e=function(t,e,i,s){let r=0,n="";do{const o="\r"===t[s-1];n+=t.slice(r,o?s-1:s)+e+(o?"\r\n":"\n")+i,r=s+1,s=t.indexOf("\n",r)}while(-1!==s);return n+=t.slice(r),n}(e,r,s,n)),s+e+r};Object.defineProperties(Fn.prototype,Mn);const zn=Fn(),Xn=Fn({level:Pn?Pn.level:0});hn.Chalk=class{constructor(t){return Gn(t)}},hn.backgroundColorNames=On,hn.backgroundColors=On,hn.chalkStderr=Xn,hn.colorNames=xn,hn.colors=xn;var Yn=hn.default=zn;hn.foregroundColorNames=En,hn.foregroundColors=En,hn.modifierNames=vn,hn.modifiers=vn,hn.supportsColor=kn,hn.supportsColorStderr=Pn;var Kn={error:function(...t){console.log(Yn.redBright(...t))},warn:function(...t){console.log(Yn.yellowBright(...t))},info:function(...t){console.log(Yn.blueBright(...t))},success:function(...t){console.log(Yn.greenBright(...t))},log:function(...t){console.log(...t)}};let Zn=e.resolve(process.cwd(),"package.json"),Jn=JSON.parse(t.readFileSync(Zn,"utf-8"));const Qn=Jn.version;Z.name(Jn.name).version(Qn),Z.option("-c, --config <config>","example: release-cli -c ./config.js").option("-p, --preId <preId>","example: release-cli -p (alpha | beta | rc | ...)").option("-t, --test","example: release-cli -t").parse(process.argv);const to=Z.opts(),eo=to.config,io=to.preId||nn(Qn)?.[0]?.toString(),so=!!to.test,ro=[];t.existsSync("package-lock.json")?ro.push("npm"):t.existsSync("yarn.lock")?ro.push("yarn"):t.existsSync("pnpm-lock.yaml")&&ro.push("pnpm");const no=["patch","minor","major",...io?["prepatch","preminor","premajor","prerelease"]:[]],oo=(t,e,i={})=>{try{return kr(t,e,{stdio:"inherit",...i})}catch(t){return Promise.reject(t)}},ao=so?async(t,e,i={})=>Kn.warn(`[test run] ${t} ${e.join(" ")}  `,JSON.stringify(i)):oo,lo=t=>Kn.success("\n",t);function ho(i){Zn=e.resolve(process.cwd(),"package.json"),Jn=JSON.parse(t.readFileSync(Zn,"utf-8")),Jn.version=i,t.writeFileSync(Zn,JSON.stringify(Jn,null,2)+"\n")}(async function(){let t="";const{release:i}=await mi.prompt({type:"select",name:"release",message:"Select release type",choices:no.map((t=>`${t} (${(t=>Qr(Qn,t,io))(t)})`)).concat(["custom"])});if("custom"===i){const{version:e}=await mi.prompt({type:"input",name:"version",message:"Input custom version",initial:Qn});t=e}else{const e=i.match(/\((.*)\)/);if(!e?.length)throw new Error("Version is required!");t=e[1]}if(!ln(t))throw new Error(`invalid target version: ${t}`);const{yes:s}=await mi.prompt({type:"confirm",name:"yes",message:`Releasing v${t}. Confirm?`});if(!s)return;lo("Updating package versions..."),ho(t),Kn.log("Package version updated: ",t),lo("Generating changelog...");let r="";eo&&(r=e.resolve(eo));const n=["-p","angular","-i","CHANGELOG.md","-s","-r","0"];r&&(Kn.info("changelog config at:👇\n\t",r),n.push("-c",r)),await oo("conventional-changelog",n);const{yes:o}=await mi.prompt({type:"confirm",name:"yes",message:"Changelog generated. Does it look good?"});if(!o)return;lo("Updating lockfile...");let a="npm";if(1===ro.length)a=ro[0];else if(ro.length>1){const{result:t}=await mi.prompt({type:"select",name:"result",message:"Select cmd type",choices:ro});a=t}try{await oo(a,["install","--prefer-offline"])}catch(t){await oo(a,["install"])}const{stdout:l}=await oo("git",["diff"],{stdio:"pipe"});l?(lo("Committing changes..."),await ao("git",["add","-A"]),await ao("git",["commit","-m",`release: v${t}`])):Kn.info("No changes to commit."),lo("Pushing to GitHub...");const{yes:h}=await mi.prompt({type:"confirm",name:"yes",message:"Publish to Git?"});if(h){await ao("git",["push"]),lo("Generate & Publish Tag...");const{yes:e}=await mi.prompt({type:"confirm",name:"yes",message:`Generate & Publish Tag: v${t}?`});e&&(await ao("git",["tag",`v${t}`]),await ao("git",["push","origin",`refs/tags/v${t}`]))}so&&Kn.success("\nDry run finished - run git diff to see package changes.")})().catch((t=>{ho(Qn),Kn.error("\n",t),process.exit(1)}));
